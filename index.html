<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>오산대광교회 & DGM TV</title>
<script src="https://cdn.tailwindcss.com/3.4.16"></script>
<script>tailwind.config={theme:{extend:{colors:{primary:'#e51937',secondary:'#1a1a1a'},borderRadius:{'none':'0px','sm':'4px',DEFAULT:'8px','md':'12px','lg':'16px','xl':'20px','2xl':'24px','3xl':'32px','full':'9999px','button':'8px'}}}}</script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css">
<style>
:where([class^="ri-"])::before { content: "\f3c2"; }
body {
font-family: 'Noto Sans KR', sans-serif;
background-color: #f8f9fa;
}
.menu-overlay {
transform: translateX(150%);
transition: transform 0.3s ease-in-out;
box-shadow: -4px 0 15px rgba(0, 0, 0, 0.1);
}
.menu-overlay.active {
transform: translateX(0);
}
.tab-content {
display: none;
}
.tab-content.active {
display: block;
}
.loading-spinner {
display: inline-block;
width: 20px;
height: 20px;
border: 2px solid #f3f3f6;
border-radius: 50%;
border-top-color: #3b82f6;
animation: spin 1s ease-in-out infinite;
}
@keyframes spin {
to { transform: rotate(360deg); }
}
.donation-modal {
display: none;
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: rgba(0,0,0,0.5);
z-index: 2000;
justify-content: center;
align-items: center;
}
.donation-modal.show {
display: flex;
}
.modal-content {
background: white;
border-radius: 16px;
padding: 32px;
max-width: 400px;
width: 90%;
text-align: center;
}
.latest-tab-content {
display: none;
}
.latest-tab-content.active {
display: block;
}
.popular-tab-content {
display: none;
}
.popular-tab-content.active {
display: block;
}
</style>
</head>
<body class="bg-white">
<!-- 네비게이션 바 -->
<nav class="fixed top-0 w-full bg-secondary text-white z-50 h-14 flex items-center justify-between px-4">
<div class="flex items-center">
<h1 class="text-xl font-['Roboto'] text-white font-medium">오산대광교회 x DGM TV</h1>
</div>
<div class="w-8 h-8 flex items-center justify-center cursor-pointer" id="menuToggle">
<i class="ri-menu-line ri-lg"></i>
</div>
</nav>

<!-- 메뉴 오버레이 -->
<div class="menu-overlay fixed top-0 right-0 w-2/3 h-full bg-secondary z-50 flex flex-col p-6" id="menuOverlay">
<div class="flex justify-end mb-6">
<div class="w-8 h-8 flex items-center justify-center cursor-pointer" id="closeMenu">
<i class="ri-close-line ri-lg text-white"></i>
</div>
</div>
<div class="flex flex-col gap-6">
<a href="#" class="text-white text-xl font-medium border-b border-gray-700 pb-4">홈</a>
<a href="#latest" class="text-white text-xl font-medium border-b border-gray-700 pb-4">최신 업로드</a>
<a href="#popular" class="text-white text-xl font-medium border-b border-gray-700 pb-4">인기영상</a>
<a href="#news" class="text-white text-xl font-medium border-b border-gray-700 pb-4">교회소식</a>
<a href="#resources" class="text-white text-xl font-medium border-b border-gray-700 pb-4">자료실</a>
<button onclick="showDonationModal()" class="text-white text-xl font-medium border-b border-gray-700 pb-4 text-left">온라인 헌금</button>
</div>
</div>

<!-- 메인 컨텐츠 -->
<main class="pt-14 pb-16">
<!-- 메인 비디오 섹션 -->
<section class="relative w-full h-64 sm:h-80 lg:h-96 overflow-hidden">
<iframe 
class="absolute top-0 left-0 w-full h-full"
src="https://www.youtube.com/embed/89JS7o9xORc?autoplay=1&mute=1&loop=1&controls=0&showinfo=0&rel=0&iv_load_policy=3&modestbranding=1&playlist=89JS7o9xORc"
frameborder="0" 
allow="autoplay; encrypted-media"
allowfullscreen>
</iframe>
<div class="absolute inset-0 bg-black/40"></div>
<div class="absolute inset-0 flex items-center justify-center">
<div class="text-center text-white px-4">
<h1 class="text-3xl sm:text-4xl lg:text-5xl font-bold mb-4">
진리의 말씀, 사랑의 나눔
</h1>
<p class="text-lg sm:text-xl mb-6 opacity-90">
여기서 시작되어 세계로 뻗어갑니다
</p>
<div class="flex flex-col sm:flex-row gap-3 justify-center">
<a href="https://www.youtube.com/@osandaekwang" target="_blank" 
class="bg-white/20 backdrop-blur-sm text-white px-4 py-2 text-sm rounded-lg font-medium hover:bg-white/30 transition border border-white/30">
오산대광교회 채널
</a>
<a href="https://www.youtube.com/@DGMTV-god" target="_blank"
class="bg-white/20 backdrop-blur-sm text-white px-4 py-2 text-sm rounded-lg font-medium hover:bg-white/30 transition border border-white/30">
DGM TV 채널
</a>
</div>
</div>
</div>
</section>

<!-- 최신 업로드 섹션 -->
<section class="px-4 py-6 bg-white" id="latest">
<h2 class="text-xl font-bold mb-4">최신 업로드</h2>
<div class="flex border-b border-gray-200 mb-4">
<button class="latest-tab-btn px-4 py-2 font-medium text-sm border-b-2 border-primary text-primary" data-tab="latest-osandae">오산대광교회</button>
<button class="latest-tab-btn px-4 py-2 font-medium text-sm border-b-2 border-transparent text-gray-500" data-tab="latest-dgmtv">DGM TV</button>
</div>
<div class="latest-tab-content active" id="latest-osandae">
<div class="overflow-x-auto pb-2">
<div class="flex gap-4" style="width: max-content;" id="latest-osandae-container">
<div class="text-center py-8">
<div class="loading-spinner"></div>
<p class="mt-2 text-gray-600 text-sm">최신영상 로딩 중...</p>
</div>
</div>
</div>
</div>
<div class="latest-tab-content" id="latest-dgmtv">
<div class="overflow-x-auto pb-2">
<div class="flex gap-4" style="width: max-content;" id="latest-dgmtv-container">
<div class="text-center py-8">
<div class="loading-spinner"></div>
<p class="mt-2 text-gray-600 text-sm">최신영상 로딩 중...</p>
</div>
</div>
</div>
</div>
</section>

<!-- 인기영상 섹션 -->
<section class="px-4 py-6 bg-gray-50" id="popular">
<h2 class="text-xl font-bold mb-4">인기영상</h2>
<div class="flex border-b border-gray-200 mb-4">
<button class="popular-tab-btn px-4 py-2 font-medium text-sm border-b-2 border-primary text-primary" data-tab="popular-osandae">오산대광교회</button>
<button class="popular-tab-btn px-4 py-2 font-medium text-sm border-b-2 border-transparent text-gray-500" data-tab="popular-dgmtv">DGM TV</button>
</div>
<div class="popular-tab-content active" id="popular-osandae">
<div class="overflow-x-auto pb-2">
<div class="flex gap-4" style="width: max-content;" id="popular-osandae-container">
<div class="text-center py-8">
<div class="loading-spinner"></div>
<p class="mt-2 text-gray-600 text-sm">인기영상 로딩 중...</p>
</div>
</div>
</div>
</div>
<div class="popular-tab-content" id="popular-dgmtv">
<div class="overflow-x-auto pb-2">
<div class="flex gap-4" style="width: max-content;" id="popular-dgmtv-container">
<div class="text-center py-8">
<div class="loading-spinner"></div>
<p class="mt-2 text-gray-600 text-sm">인기영상 로딩 중...</p>
</div>
</div>
</div>
</div>
</section>

<!-- 교회 소식 섹션 -->
<section class="px-4 py-6 bg-white" id="news">
<div class="flex justify-between items-center mb-4">
<h2 class="text-xl font-bold">교회 소식</h2>
<button onclick="showMoreNews()" class="text-primary text-sm font-medium">더보기</button>
</div>
<div id="news-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
<div class="text-center py-8">
<div class="loading-spinner"></div>
<p class="mt-2 text-gray-600">소식을 불러오는 중...</p>
</div>
</div>
</section>

<!-- 자료실 섹션 -->
<section class="px-4 py-6 bg-gray-50" id="resources">
<div class="flex justify-between items-center mb-4">
<h2 class="text-xl font-bold">자료실</h2>
<button onclick="showMoreResources()" class="text-primary text-sm font-medium">더보기</button>
</div>
<div id="resources-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
<div class="text-center py-8">
<div class="loading-spinner"></div>
<p class="mt-2 text-gray-600">자료를 불러오는 중...</p>
</div>
</div>
</section>

<!-- 교회 정보 섹션 -->
<section class="px-4 py-6 bg-white">
<h2 class="text-xl font-bold mb-4">교회 정보</h2>
<div class="bg-gray-50 p-4 rounded-lg">
<div class="mb-4">
<h3 class="font-medium text-sm mb-2">예배 시간</h3>
<ul class="text-xs text-gray-700 space-y-1">
<li>• 주일예배: 일요일 오전 11시</li>
<li>• 오후예배: 일요일 오후 2시</li>
<li>• 새벽기도: 일요일 오전 5시</li>
</ul>
</div>
<div class="mb-4">
<h3 class="font-medium text-sm mb-2">오시는 길</h3>
<p class="text-xs text-gray-700">경기도 오산시 궐리사로46번길 60-5</p>
</div>
<div>
<h3 class="font-medium text-sm mb-2">연락처</h3>
<p class="text-xs text-gray-700">FAX: 031-374-6262</p>
<p class="text-xs text-gray-700">이메일: derek1817@naver.com</p>
<div class="flex gap-4 mt-3">
<a href="https://www.facebook.com/osandaechurch" target="_blank" class="w-8 h-8 flex items-center justify-center bg-gray-200 rounded-full cursor-pointer">
<i class="ri-facebook-fill text-gray-700"></i>
</a>
<a href="https://www.instagram.com/osandaechurch" target="_blank" class="w-8 h-8 flex items-center justify-center bg-gray-200 rounded-full cursor-pointer">
<i class="ri-instagram-line text-gray-700"></i>
</a>
</div>
</div>
</div>
</section>
</main>

<!-- 저작권 표시 -->
<footer class="bg-gray-800 text-white text-center py-4">
<p class="text-sm text-gray-400">
© 2025 오산대광교회 & DGM TV. All rights reserved.
</p>
</footer>

<!-- 하단 탭바 -->
<nav class="fixed bottom-0 w-full bg-white border-t border-gray-200 z-40">
<div class="grid grid-cols-4 h-16">
<a href="#" class="bottom-menu-item flex flex-col items-center justify-center text-primary" data-menu="home">
<div class="w-6 h-6 flex items-center justify-center">
<i class="ri-home-5-fill"></i>
</div>
<span class="text-xs mt-1">홈</span>
</a>
<a href="#latest" class="bottom-menu-item flex flex-col items-center justify-center text-gray-500" data-menu="video">
<div class="w-6 h-6 flex items-center justify-center">
<i class="ri-video-line"></i>
</div>
<span class="text-xs mt-1">영상</span>
</a>
<a href="#news" class="bottom-menu-item flex flex-col items-center justify-center text-gray-500" data-menu="news">
<div class="w-6 h-6 flex items-center justify-center">
<i class="ri-file-list-3-line"></i>
</div>
<span class="text-xs mt-1">소식</span>
</a>
<a href="#resources" class="bottom-menu-item flex flex-col items-center justify-center text-gray-500" data-menu="info">
<div class="w-6 h-6 flex items-center justify-center">
<i class="ri-information-line"></i>
</div>
<span class="text-xs mt-1">정보</span>
</a>
</div>
</nav>

<!-- 온라인 헌금 모달 -->
<div class="donation-modal" id="donationModal">
<div class="modal-content">
<h3 class="text-xl font-bold mb-4">온라인 헌금</h3>
<div class="bg-gray-100 p-4 rounded-lg mb-4">
<p class="font-medium">농협은행</p>
<p class="text-2xl font-bold text-blue-600">170354-55-000829</p>
<p class="text-sm text-gray-600">예금주: 오산산성교회</p>
</div>
<button onclick="copyAccount()" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition mb-4">
<i class="ri-file-copy-line mr-2"></i>계좌 복사
</button>
<p class="text-sm text-gray-600 mb-4">헌금은 하나님께 드리는 예배의 한 부분입니다.<br>기쁨과 감사함으로 드려주세요.</p>
<button onclick="closeDonationModal()" class="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition">
닫기
</button>
</div>
</div>

<script>
// Global Variables
const API_KEY = 'AIzaSyDDdv5xmVzUvYhhT7PQrJ1BxATZp-wyLIg';
const OSANDAE_CHANNEL_ID = 'UCcwM7j_1eMYRkFMrjUPVPRw';
const DGMTV_CHANNEL_ID = 'UCARlnnL9L0Y6ZTxeVAV6j0g';

let newsData = [];
let resourcesData = [];
const CACHE_DURATION = 30 * 60 * 1000;

// Utility Functions
function formatViewCount(viewCount) {
    const count = parseInt(viewCount);
    if (count >= 10000) {
        return (count / 10000).toFixed(1) + '만회';
    } else if (count >= 1000) {
        return (count / 1000).toFixed(1) + '천회';
    }
    return count + '회';
}

function getCachedData(key) {
    try {
        const cached = localStorage.getItem(key);
        if (!cached) return null;
        const data = JSON.parse(cached);
        if (Date.now() - data.timestamp > CACHE_DURATION) {
            localStorage.removeItem(key);
            return null;
        }
        return data.content;
    } catch (error) {
        return null;
    }
}

function setCachedData(key, data) {
    try {
        const cacheData = {
            content: data,
            timestamp: Date.now()
        };
        localStorage.setItem(key, JSON.stringify(cacheData));
    } catch (error) {
        console.error('Failed to cache data:', error);
    }
}

// YouTube API Functions
async function loadLatestVideos(channel) {
    try {
        const cacheKey = `latest_${channel}`;
        let cachedVideos = getCachedData(cacheKey);
        
        if (cachedVideos) {
            displayLatestVideos(channel, cachedVideos);
            return;
        }

        const channelId = channel === 'osandae' ? OSANDAE_CHANNEL_ID : DGMTV_CHANNEL_ID;
        const response = await fetch(
            `https://www.googleapis.com/youtube/v3/search?part=snippet&channelId=${channelId}&order=date&type=video&maxResults=6&key=${API_KEY}`
        );
        
        const data = await response.json();
        const videos = data.items || [];
        
        setCachedData(cacheKey, videos);
        displayLatestVideos(channel, videos);
        
    } catch (error) {
        console.error('Error loading latest videos:', error);
        const container = document.getElementById(`latest-${channel}-container`);
        container.innerHTML = '<div class="text-center py-8"><p class="text-gray-500">영상을 불러올 수 없습니다.</p></div>';
    }
}

async function loadPopularVideos(channel) {
    try {
        const cacheKey = `popular_${channel}`;
        let cachedVideos = getCachedData(cacheKey);
        
        if (cachedVideos) {
            displayPopularVideos(channel, cachedVideos);
            return;
        }

        const channelId = channel === 'osandae' ? OSANDAE_CHANNEL_ID : DGMTV_CHANNEL_ID;
        const searchResponse = await fetch(
            `https://www.googleapis.com/youtube/v3/search?part=snippet&channelId=${channelId}&order=viewCount&type=video&maxResults=6&key=${API_KEY}`
        );
        
        const searchData = await searchResponse.json();
        let videos = searchData.items || [];
        
        if (videos.length > 0) {
            const videoIds = videos.map(video => video.id.videoId).join(',');
            const statsResponse = await fetch(
                `https://www.googleapis.com/youtube/v3/videos?part=statistics&id=${videoIds}&key=${API_KEY}`
            );
            
            const statsData = await statsResponse.json();
            videos = videos.map((video, index) => {
                const stats = statsData.items[index];
                return {
                    ...video,
                    viewCount: stats ? stats.statistics.viewCount : '0'
                };
            });
            
            videos.sort((a, b) => parseInt(b.viewCount) - parseInt(a.viewCount));
        }
        
        setCachedData(cacheKey, videos);
        displayPopularVideos(channel, videos);
        
    } catch (error) {
        console.error('Error loading popular videos:', error);
        const container = document.getElementById(`popular-${channel}-container`);
        container.innerHTML = '<div class="text-center py-8"><p class="text-gray-500">영상을 불러올 수 없습니다.</p></div>';
    }
}

function displayLatestVideos(channel, videos) {
    const container = document.getElementById(`latest-${channel}-container`);
    
    if (videos.length === 0) {
        container.innerHTML = '<div class="text-center py-8"><p class="text-gray-500">영상이 없습니다.</p></div>';
        return;
    }
    
    container.innerHTML = videos.map(video => `
        <div class="bg-white rounded-lg shadow-sm overflow-hidden cursor-pointer" style="width: 220px;" onclick="openVideo('${video.id.videoId}')">
            <div class="relative h-32 overflow-hidden">
                <img src="https://img.youtube.com/vi/${video.id.videoId}/mqdefault.jpg" alt="${video.snippet.title}" class="w-full h-full object-cover">
                <div class="absolute bottom-2 right-2 bg-black/70 text-white text-xs px-2 py-1 rounded">
                    ${Math.floor(Math.random() * 60) + 1}:${Math.floor(Math.random() * 60).toString().padStart(2, '0')}
                </div>
            </div>
            <div class="p-3">
                <h3 class="font-medium text-xs line-clamp-2">${video.snippet.title}</h3>
                <p class="text-xs text-gray-500 mt-1">${new Date(video.snippet.publishedAt).toLocaleDateString('ko-KR')}</p>
            </div>
        </div>
    `).join('');
}

function displayPopularVideos(channel, videos) {
    const container = document.getElementById(`popular-${channel}-container`);
    
    if (videos.length === 0) {
        container.innerHTML = '<div class="text-center py-8"><p class="text-gray-500">영상이 없습니다.</p></div>';
        return;
    }
    
    container.innerHTML = videos.map(video => `
        <div class="bg-white rounded-lg shadow-sm overflow-hidden cursor-pointer" style="width: 220px;" onclick="openVideo('${video.id.videoId}')">
            <div class="relative h-32 overflow-hidden">
                <img src="https://img.youtube.com/vi/${video.id.videoId}/mqdefault.jpg" alt="${video.snippet.title}" class="w-full h-full object-cover">
                <div class="absolute bottom-2 right-2 bg-black/70 text-white text-xs px-2 py-1 rounded">
                    ${Math.floor(Math.random() * 60) + 1}:${Math.floor(Math.random() * 60).toString().padStart(2, '0')}
                </div>
            </div>
            <div class="p-3">
                <h3 class="font-medium text-xs line-clamp-2">${video.snippet.title}</h3>
                <p class="text-xs text-gray-500 mt-1">조회수 ${formatViewCount(video.viewCount || '0')}</p>
            </div>
        </div>
    `).join('');
}

function openVideo(videoId) {
    window.open(`https://www.youtube.com/watch?v=${videoId}`, '_blank');
}

// News and Resources Functions
async function loadNewsContent() {
    try {
        const response = await fetch('https://api.github.com/repos/osandaekwang/dgmtv-website/contents/_posts/news');
        if (!response.ok) throw new Error('GitHub API Error');
        
        const files = await response.json();
        const mdFiles = files.filter(file => file.name.endsWith('.md') && file.name !== 'README.md');
        
        newsData = [];
        
        for (let file of mdFiles) {
            try {
                const contentResponse = await fetch(file.download_url);
                if (contentResponse.ok) {
                    const content = await contentResponse.text();
                    const frontMatterMatch = content.match(/^---\n([\s\S]*?)\n---/);
                    
                    if (frontMatterMatch) {
                        const frontMatter = frontMatterMatch[1];
                        const body = content.replace(/^---\n[\s\S]*?\n---\n/, '');
                        
                        const title = frontMatter.match(/title:\s*(.+)/)?.[1] || '제목 없음';
                        const date = frontMatter.match(/date:\s*(.+)/)?.[1] || '';
                        const category = frontMatter.match(/category:\s*(.+)/)?.[1] || '소식';
                        const excerpt = frontMatter.match(/excerpt:\s*(.+)/)?.[1] || '';
                        const author = frontMatter.match(/author:\s*(.+)/)?.[1] || '관리자';
                        
                        newsData.push({ title, date, category, excerpt, author, body });
                    }
                }
            } catch (error) {
                console.log(`Error loading ${file.name}:`, error);
            }
        }
        
        newsData.sort((a, b) => new Date(b.date) - new Date(a.date));
        displayNews();
        
    } catch (error) {
        console.log('News loading error:', error);
        document.getElementById('news-container').innerHTML = '<div class="col-span-full text-center py-12"><p class="text-gray-500">소식을 불러올 수 없습니다.</p></div>';
    }
}

async function loadResourcesContent() {
    try {
        const response = await fetch('https://api.github.com/repos/osandaekwang/dgmtv-website/contents/_posts/resources');
        if (!response.ok) throw new Error('GitHub API Error');
        
        const files = await response.json();
        const mdFiles = files.filter(file => file.name.endsWith('.md') && file.name !== 'README.md');
        
        resourcesData = [];
        
        for (let file of mdFiles) {
            try {
                const contentResponse = await fetch(file.download_url);
                if (contentResponse.ok) {
                    const content = await contentResponse.text();
                    const frontMatterMatch = content.match(/^---\n([\s\S]*?)\n---/);
                    
                    if (frontMatterMatch) {
                        const frontMatter = frontMatterMatch[1];
                        const body = content.replace(/^---\n[\s\S]*?\n---\n/, '');
                        
                        const title = frontMatter.match(/title:\s*(.+)/)?.[1] || '제목 없음';
                        const date = frontMatter.match(/date:\s*(.+)/)?.[1] || '';
                        const type = frontMatter.match(/type:\s*(.+)/)?.[1] || '자료';
                        const description = frontMatter.match(/description:\s*(.+)/)?.[1] || '';
                        const file_url = frontMatter.match(/file:\s*(.+)/)?.[1] || '';
                        
                        resourcesData.push({ title, date, type, description, body, file: file_url });
                    }
                }
            } catch (error) {
                console.log(`Error loading ${file.name}:`, error);
            }
        }
        
        resourcesData.sort((a, b) => new Date(b.date) - new Date(a.date));
        displayResources();
        
    } catch (error) {
        console.log('Resources loading error:', error);
        document.getElementById('resources-container').innerHTML = '<div class="col-span-full text-center py-12"><p class="text-gray-500">자료를 불러올 수 없습니다.</p></div>';
    }
}

function displayNews() {
    const container = document.getElementById('news-container');
    const displayItems = newsData.slice(0, 6);
    
    if (displayItems.length > 0) {
        container.innerHTML = displayItems.map((news, index) => `
            <article class="bg-white rounded-lg shadow-lg overflow-hidden hover:transform hover:scale-105 transition cursor-pointer" onclick="alert('소식 상세: ${news.title}')">
                <div class="p-6">
                    <div class="flex items-center justify-between mb-3">
                        <span class="text-xs text-white bg-red-600 px-2 py-1 rounded">${news.category}</span>
                        <span class="text-sm text-gray-500">${new Date(news.date).toLocaleDateString('ko-KR')}</span>
                    </div>
                    <h4 class="text-xl font-semibold text-gray-800 mb-3">${news.title}</h4>
                    <p class="text-gray-600 mb-3">${news.excerpt}</p>
                    <div class="text-sm text-gray-500">
                        <span>작성자: ${news.author}</span>
                    </div>
                </div>
            </article>
        `).join('');
    } else {
        container.innerHTML = '<div class="col-span-full text-center py-12"><p class="text-gray-500">소식이 없습니다.</p></div>';
    }
}

function displayResources() {
    const container = document.getElementById('resources-container');
    const displayItems = resourcesData.slice(0, 6);
    
    if (displayItems.length > 0) {
        container.innerHTML = displayItems.map((resource, index) => `
            <article class="bg-white rounded-lg shadow-lg p-6 hover:transform hover:scale-105 transition cursor-pointer" onclick="alert('자료 상세: ${resource.title}')">
                <div class="flex items-center justify-between mb-3">
                    <span class="text-xs text-white bg-blue-600 px-2 py-1 rounded">${resource.type}</span>
                    <span class="text-sm text-gray-500">${new Date(resource.date).toLocaleDateString('ko-KR')}</span>
                </div>
                <h4 class="text-xl font-semibold text-gray-800 mb-3">${resource.title}</h4>
                <p class="text-gray-600 mb-4">${resource.description}</p>
                <div class="flex flex-wrap gap-2">
                    ${resource.file ? '<span class="inline-flex items-center text-indigo-600 text-sm"><i class="ri-external-link-line mr-1"></i>외부 링크</span>' : ''}
                    <span class="inline-flex items-center text-gray-600 text-sm"><i class="ri-eye-line mr-1"></i>클릭하여 상세보기</span>
                </div>
            </article>
        `).join('');
    } else {
        container.innerHTML = '<div class="col-span-full text-center py-12"><p class="text-gray-500">자료가 없습니다.</p></div>';
    }
}

function showMoreNews() {
    alert('더 많은 소식 페이지로 이동');
}

function showMoreResources() {
    alert('더 많은 자료 페이지로 이동');
}

// Tab Functions
function initializeTabs() {
    // Latest Videos Tabs
    const latestTabBtns = document.querySelectorAll('.latest-tab-btn');
    const latestTabContents = document.querySelectorAll('.latest-tab-content');
    
    latestTabBtns.forEach(btn => {
        btn.addEventListener('click', function() {
            const tabId = this.getAttribute('data-tab');
            
            latestTabBtns.forEach(btn => {
                btn.classList.remove('border-primary', 'text-primary');
                btn.classList.add('border-transparent', 'text-gray-500');
            });
            
            this.classList.remove('border-transparent', 'text-gray-500');
            this.classList.add('border-primary', 'text-primary');
            
            latestTabContents.forEach(content => {
                content.classList.remove('active');
            });
            
            document.getElementById(tabId).classList.add('active');
        });
    });

    // Popular Videos Tabs
    const popularTabBtns = document.querySelectorAll('.popular-tab-btn');
    const popularTabContents = document.querySelectorAll('.popular-tab-content');
    
    popularTabBtns.forEach(btn => {
        btn.addEventListener('click', function() {
            const tabId = this.getAttribute('data-tab');
            
            popularTabBtns.forEach(btn => {
                btn.classList.remove('border-primary', 'text-primary');
                btn.classList.add('border-transparent', 'text-gray-500');
            });
            
            this.classList.remove('border-transparent', 'text-gray-500');
            this.classList.add('border-primary', 'text-primary');
            
            popularTabContents.forEach(content => {
                content.classList.remove('active');
            });
            
            document.getElementById(tabId).classList.add('active');
        });
    });
}

// Bottom Menu Functions
function initializeBottomMenu() {
    const bottomMenuItems = document.querySelectorAll('.bottom-menu-item');
    
    bottomMenuItems.forEach(item => {
        item.addEventListener('click', function(e) {
            // Remove active state from all items
            bottomMenuItems.forEach(menuItem => {
                menuItem.classList.remove('text-primary');
                menuItem.classList.add('text-gray-500');
            });
            
            // Add active state to clicked item
            this.classList.remove('text-gray-500');
            this.classList.add('text-primary');
        });
    });
}

// Menu Functions
function initializeMenu() {
    const menuToggle = document.getElementById('menuToggle');
    const closeMenu = document.getElementById('closeMenu');
    const menuOverlay = document.getElementById('menuOverlay');

    menuToggle.addEventListener('click', function() {
        menuOverlay.classList.add('active');
    });

    closeMenu.addEventListener('click', function() {
        menuOverlay.classList.remove('active');
    });

    const menuLinks = menuOverlay.querySelectorAll('a, button');
    menuLinks.forEach(link => {
        link.addEventListener('click', function() {
            menuOverlay.classList.remove('active');
        });
    });
}

// Donation Modal Functions
function showDonationModal() {
    document.getElementById('donationModal').classList.add('show');
}

function closeDonationModal() {
    document.getElementById('donationModal').classList.remove('show');
}

function copyAccount() {
    navigator.clipboard.writeText('170354-55-000829').then(() => {
        alert('계좌번호가 복사되었습니다.');
    });
}

// Initialize Everything
document.addEventListener('DOMContentLoaded', function() {
    initializeMenu();
    initializeTabs();
    initializeBottomMenu();
    
    // Load initial content
    loadLatestVideos('osandae');
    loadLatestVideos('dgmtv');
    loadPopularVideos('osandae');
    loadPopularVideos('dgmtv');
    loadNewsContent();
    loadResourcesContent();
    
    // Smooth scrolling for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({ behavior: 'smooth' });
            }
        });
    });
});
</script>
</body>
</html>
