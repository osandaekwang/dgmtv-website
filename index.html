<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¤ì°ëê´êµí CMS - ì¤ì  ìë ê´ë¦¬ ìì¤í</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .sidebar {
            transition: transform 0.3s ease;
        }
        .sidebar-collapsed {
            transform: translateX(-100%);
        }
        .main-content {
            transition: margin-left 0.3s ease;
        }
        .main-content-expanded {
            margin-left: 0;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .menu-item {
            transition: all 0.3s ease;
        }
        .menu-item:hover {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transform: translateX(5px);
        }
        .menu-item.active {
            background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
            color: white;
        }
        .editor {
            min-height: 300px;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            padding: 16px;
        }
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            padding: 12px 24px;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            opacity: 0;
            transform: translateX(100%);
            transition: all 0.3s ease;
        }
        .toast.show {
            opacity: 1;
            transform: translateX(0);
        }
        .toast.success {
            background: #10b981;
        }
        .toast.error {
            background: #ef4444;
        }
        .toast.warning {
            background: #f59e0b;
        }
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
            display: none;
            justify-content: center;
            align-items: center;
        }
        .modal.show {
            display: flex !important;
        }
        .modal.show {
            display: flex;
        }
        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .file-drop-zone {
            border: 2px dashed #d1d5db;
            border-radius: 8px;
            padding: 40px;
            text-align: center;
            transition: all 0.3s ease;
        }
        .file-drop-zone.dragover {
            border-color: #4f46e5;
            background: #f3f4f6;
        }
        .github-connected {
            background: #10b981;
            color: white;
        }
        .github-disconnected {
            background: #ef4444;
            color: white;
        }
        .preview-iframe {
            width: 100%;
            height: 600px;
            border: 1px solid #d1d5db;
            border-radius: 8px;
        }
    </style>
    <script>

// ê³µíµ ë°ì´í° êµ¬ì¡° ë° ëê¸°í ìì¤í
window.DGMTV_SHARED = window.DGMTV_SHARED || {
    // ë°ì´í° í¤ ìì
    KEYS: {
        NEWS: 'dgmtv_news',
        RESOURCES: 'dgmtv_resources', 
        FOOTER_TEXT: 'dgmtv_footer_text',
        VISITOR_STATS: 'dgmtv_visitor_stats',
        SETTINGS: 'dgmtv_settings',
        LAST_UPDATE: 'dgmtv_last_update'
    },

    // ë°ì´í° ê°ì ¸ì¤ê¸°
    getData: function(key, defaultValue = null) {
        try {
            const data = localStorage.getItem(key);
            return data ? JSON.parse(data) : defaultValue;
        } catch (e) {
            console.error('ë°ì´í° ì½ê¸° ì¤ë¥:', e);
            return defaultValue;
        }
    },

    // ë°ì´í° ì ì¥
    setData: function(key, value) {
        try {
            localStorage.setItem(key, JSON.stringify(value));
            localStorage.setItem(this.KEYS.LAST_UPDATE, Date.now());
            this.notifyUpdate(key, value);
            return true;
        } catch (e) {
            console.error('ë°ì´í° ì ì¥ ì¤ë¥:', e);
            return false;
        }
    },

    // ìë°ì´í¸ ìë¦¼
    notifyUpdate: function(key, value) {
        // ë¤ë¥¸ ì°½/í­ì ë³ê²½ì¬í­ ìë¦¼
        try {
            window.dispatchEvent(new CustomEvent('dgmtv_data_update', {
                detail: { key: key, value: value, timestamp: Date.now() }
            }));
        } catch (e) {
            console.error('ìë°ì´í¸ ìë¦¼ ì¤ë¥:', e);
        }
    },

    // ì¤ìê° ëê¸°í ì¤ì 
    setupSync: function(callback) {
        // localStorage ë³ê²½ ê°ì§
        window.addEventListener('storage', function(e) {
            if (e.key && e.key.startsWith('dgmtv_')) {
                if (callback) callback(e.key, e.newValue);
            }
        });

        // ê°ì ì°½ììì ë³ê²½ì¬í­ ê°ì§
        window.addEventListener('dgmtv_data_update', function(e) {
            if (callback) callback(e.detail.key, e.detail.value);
        });
    },

    // ì´ê¸° ë°ì´í° ì¤ì 
    initializeData: function() {
        // ê¸°ë³¸ ë´ì¤ ë°ì´í°
        if (!this.getData(this.KEYS.NEWS)) {
            this.setData(this.KEYS.NEWS, []);
        }

        // ê¸°ë³¸ ìë£ ë°ì´í°
        if (!this.getData(this.KEYS.RESOURCES)) {
            this.setData(this.KEYS.RESOURCES, []);
        }

        // ê¸°ë³¸ í¸í° íì¤í¸
        if (!this.getData(this.KEYS.FOOTER_TEXT)) {
            this.setData(this.KEYS.FOOTER_TEXT, "íëëì ì¬ëì ì¤ì²íë©° ì§ì­ì¬íì í¨ê» ì±ì¥íë êµí");
        }

        // ê¸°ë³¸ ë°©ë¬¸ì íµê³
        if (!this.getData(this.KEYS.VISITOR_STATS)) {
            this.setData(this.KEYS.VISITOR_STATS, {
                daily: 0,
                total: 0,
                lastVisitDate: new Date().toISOString().split('T')[0]
            });
        }

        // ê¸°ë³¸ ì¤ì 
        if (!this.getData(this.KEYS.SETTINGS)) {
            this.setData(this.KEYS.SETTINGS, {
                siteName: "ì¤ì°ëê´êµí",
                description: "íëëì ì¬ëì ì¤ì²íë©° ì§ì­ì¬íì í¨ê» ì±ì¥íë êµí",
                phone: "031-377-0675",
                email: "derek1817@naver.com",
                address: "ê²½ê¸°ë ì¤ì°ì ê¶ë¦¬ì¬ë¡46ë²ê¸¸ 60-5"
            });
        }
    }
};

// ì´ê¸°í
window.DGMTV_SHARED.initializeData();

</script>
    <script>

// CMS ë°ì´í° ëê¸°í ìì¤í
window.DGMTV_CMS = {
    // ê¸°ì¡´ dataStoreë¥¼ ê³µíµ ì ì¥ìì ì°ë
    syncDataStore: function() {
        if (typeof dataStore !== 'undefined') {
            // ê¸°ì¡´ dataStoreì ë°ì´í°ë¥¼ ê³µíµ ì ì¥ìì ì ì¥
            if (dataStore.news) {
                window.DGMTV_SHARED.setData(window.DGMTV_SHARED.KEYS.NEWS, dataStore.news);
            }
            if (dataStore.resources) {
                window.DGMTV_SHARED.setData(window.DGMTV_SHARED.KEYS.RESOURCES, dataStore.resources);
            }
            if (dataStore.settings && dataStore.settings.footerText) {
                window.DGMTV_SHARED.setData(window.DGMTV_SHARED.KEYS.FOOTER_TEXT, dataStore.settings.footerText);
            }
        }
    },

    // ê³µíµ ì ì¥ììì dataStoreë¡ ë°ì´í° ë¡ë
    loadFromSharedStorage: function() {
        if (typeof dataStore !== 'undefined') {
            const news = window.DGMTV_SHARED.getData(window.DGMTV_SHARED.KEYS.NEWS, []);
            const resources = window.DGMTV_SHARED.getData(window.DGMTV_SHARED.KEYS.RESOURCES, []);
            const footerText = window.DGMTV_SHARED.getData(window.DGMTV_SHARED.KEYS.FOOTER_TEXT);

            if (news) dataStore.news = news;
            if (resources) dataStore.resources = resources;
            if (footerText && dataStore.settings) {
                dataStore.settings.footerText = footerText;
            }
        }
    },

    // ê¸°ì¡´ ì ì¥ í¨ì íì¥
    extendSaveData: function() {
        if (typeof saveData === 'function') {
            const originalSaveData = saveData;
            window.saveData = function() {
                // ê¸°ì¡´ ì ì¥ ì¤í
                const result = originalSaveData.apply(this, arguments);

                // ê³µíµ ì ì¥ììë ì ì¥
                window.DGMTV_CMS.syncDataStore();

                return result;
            };
        }
    },

    // ë´ì¤ ì ì¥ í¨ì íì¥
    extendNewsSave: function() {
        if (typeof handleNewsSave === 'function') {
            const originalHandleNewsSave = handleNewsSave;
            window.handleNewsSave = function() {
                // ê¸°ì¡´ ì ì¥ ì¤í
                const result = originalHandleNewsSave.apply(this, arguments);

                // ê³µíµ ì ì¥ìì ë´ì¤ ë°ì´í° ì ì¥
                if (typeof dataStore !== 'undefined' && dataStore.news) {
                    window.DGMTV_SHARED.setData(window.DGMTV_SHARED.KEYS.NEWS, dataStore.news);
                }

                return result;
            };
        }
    },

    // í¸í° ì ì¥ í¨ì íì¥
    extendFooterSave: function() {
        if (typeof saveFooterText === 'function') {
            const originalSaveFooterText = saveFooterText;
            window.saveFooterText = function() {
                // ê¸°ì¡´ ì ì¥ ì¤í
                const result = originalSaveFooterText.apply(this, arguments);

                // ê³µíµ ì ì¥ìì í¸í° íì¤í¸ ì ì¥
                if (typeof dataStore !== 'undefined' && dataStore.settings && dataStore.settings.footerText) {
                    window.DGMTV_SHARED.setData(window.DGMTV_SHARED.KEYS.FOOTER_TEXT, dataStore.settings.footerText);
                }

                return result;
            };
        }
    },

    // ë°©ë¬¸ì íµê³ ì°ë
    syncVisitorStats: function() {
        const sharedStats = window.DGMTV_SHARED.getData(window.DGMTV_SHARED.KEYS.VISITOR_STATS, {
            daily: 0,
            total: 0,
            lastVisitDate: new Date().toISOString().split('T')[0]
        });

        // CMS ëìë³´ëì ë°©ë¬¸ì íµê³ íì
        const dailyElement = document.getElementById('dailyVisitors');
        const totalElement = document.getElementById('totalVisitors');

        if (dailyElement) dailyElement.textContent = sharedStats.daily;
        if (totalElement) totalElement.textContent = sharedStats.total;
    },

    // ì¤ìê° ëê¸°í ì¤ì 
    setupRealtimeSync: function() {
        // ë¤ë¥¸ ì°½ììì ë³ê²½ì¬í­ ê°ì§
        window.DGMTV_SHARED.setupSync((key, value) => {
            if (key === window.DGMTV_SHARED.KEYS.VISITOR_STATS) {
                this.syncVisitorStats();
            }

            // ê¸°ì¡´ UI ìë°ì´í¸ í¨ìë¤ í¸ì¶
            if (typeof updateNewsList === 'function') {
                updateNewsList();
            }
            if (typeof updateResourcesList === 'function') {
                updateResourcesList();
            }
        });

        // ì£¼ê¸°ì  ëê¸°í (10ì´ë§ë¤)
        setInterval(() => {
            this.syncVisitorStats();
        }, 10000);
    },

    // ì´ê¸°í
    init: function() {
        // ê¸°ì¡´ í¨ìë¤ íì¥
        this.extendSaveData();
        this.extendNewsSave();
        this.extendFooterSave();

        // ê³µíµ ì ì¥ììì ë°ì´í° ë¡ë
        this.loadFromSharedStorage();

        // ì¤ìê° ëê¸°í ì¤ì 
        this.setupRealtimeSync();

        // ë°©ë¬¸ì íµê³ ëê¸°í
        this.syncVisitorStats();

        console.log('DGMTV CMS ëê¸°í ìì¤í ì´ê¸°í ìë£');
    }
};

// CMS ë¡ë ìë£ í ì´ê¸°í (ì½ê°ì ì§ì°ì ëì´ ê¸°ì¡´ ì¤í¬ë¦½í¸ ë¡ë ëê¸°)
document.addEventListener('DOMContentLoaded', function() {
    console.log('DOM 로드 완료 - 초기화 시작');

    // 확실한 초기화 순서
    try {
        // 1. 이벤트 리스너 설정 (가장 중요)
        if (typeof setupEventListeners === 'function') {
            setupEventListeners();
        }

        // 2. 기본 데이터 로드
        if (typeof loadData === 'function') {
            loadData();
        }

        // 3. UI 업데이트
        if (typeof updateNewsList === 'function') {
            updateNewsList();
        }
        if (typeof updateResourcesList === 'function') {
            updateResourcesList();
        }
        if (typeof updatePopupsList === 'function') {
            updatePopupsList();
        }
        if (typeof loadFooterText === 'function') {
            loadFooterText();
        }
        if (typeof setupFooterPreview === 'function') {
            setupFooterPreview();
        }

        console.log('기본 초기화 완료');

        // 4. 동기화 시스템 초기화 (약간의 지연)
        setTimeout(function() {
            if (window.DGMTV_CMS && typeof window.DGMTV_CMS.init === 'function') {
                window.DGMTV_CMS.init();
                console.log('동기화 시스템 초기화 완료');
            }
        }, 1000);

        // 5. 로그인 모달 확실히 표시
        setTimeout(function() {
            const loginModal = document.getElementById('loginModal');
            if (loginModal) {
                loginModal.style.display = 'flex';
                loginModal.classList.add('show');
                console.log('로그인 모달 표시 완료');

                // 사용자명 입력 필드에 포커스
                const usernameInput = document.getElementById('username');
                if (usernameInput) {
                    usernameInput.focus();
                }
            }
        }, 500);

    } catch (error) {
        console.error('초기화 중 오류:', error);
    }
});

</script>
</head>
<body class="bg-gray-100">
    <!-- Toast ìë¦¼ -->
    <div id="toast" class="toast"></div>

    <!-- ë¡ê·¸ì¸ ëª¨ë¬ -->
    <div id="loginModal" class="modal show">
        <div class="bg-white rounded-lg p-8 max-w-md w-full mx-4">
            <div class="text-center mb-6">
                <i class="fas fa-church text-4xl text-indigo-600 mb-4"></i>
                <h2 class="text-2xl font-bold text-gray-800">ì¤ì°ëê´êµí CMS</h2>
                <p class="text-gray-600">ì¤ì  ìë ê´ë¦¬ ìì¤í</p>
            </div>
            <form id="loginForm">
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">ì¬ì©ìëª</label>
                    <input type="text" id="username" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="admin" required>
                </div>
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-2">ë¹ë°ë²í¸</label>
                    <input type="password" id="password" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="dgmtv2025" required>
                </div>
                <button type="submit" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2 px-4 rounded-md transition">
                    ë¡ê·¸ì¸
                </button>
            </form>
            <div class="mt-4 text-sm text-gray-600">
                <p><strong>íì¤í¸ ê³ì :</strong></p>
                <p>ê´ë¦¬ì: admin / dgmtv2025</p>
                <p>ìëí°: editor / editor123</p>
            </div>
        </div>
    </div>

    <div class="flex h-screen">
        <!-- ì¬ì´ëë° -->
        <div id="sidebar" class="sidebar bg-white shadow-lg w-64 fixed h-full z-50">
            <div class="p-6 border-b">
                <div class="flex items-center space-x-3">
                    <i class="fas fa-church text-2xl text-indigo-600"></i>
                    <div>
                        <h1 class="text-lg font-bold text-gray-800">ì¤ì°ëê´êµí</h1>
                        <p class="text-sm text-gray-600">CMS ê´ë¦¬ì</p>
                    </div>
                </div>
            </div>

            <nav class="mt-6">
                <div class="px-4">
                    <div class="menu-item active px-4 py-3 rounded-lg cursor-pointer mb-2" onclick="showTab('dashboard')">
                        <i class="fas fa-tachometer-alt mr-3"></i>ëìë³´ë
                    </div>
                    <div class="menu-item px-4 py-3 rounded-lg cursor-pointer mb-2" onclick="showTab('news')">
                        <i class="fas fa-newspaper mr-3"></i>ë´ì¤ ê´ë¦¬
                    </div>
                    <div class="menu-item px-4 py-3 rounded-lg cursor-pointer mb-2" onclick="showTab('resources')">
                        <i class="fas fa-book mr-3"></i>ìë£ ê´ë¦¬
                    </div>
                    <div class="menu-item px-4 py-3 rounded-lg cursor-pointer mb-2" onclick="showTab('videos')">
                        <i class="fas fa-video mr-3"></i>ìì ê´ë¦¬
                    </div>
                    <div class="menu-item px-4 py-3 rounded-lg cursor-pointer mb-2" onclick="showTab('pages')">
                        <i class="fas fa-edit mr-3"></i>íì´ì§ ìì 
                    </div>
                    <div class="menu-item px-4 py-3 rounded-lg cursor-pointer mb-2" onclick="showTab('popup')">
                        <i class="fas fa-window-restore mr-3"></i>íì ê´ë¦¬
                    </div>
                    <div class="menu-item px-4 py-3 rounded-lg cursor-pointer mb-2" onclick="showTab('settings')">
                        <i class="fas fa-cog mr-3"></i>ì¤ì 
                    </div>
                    <div class="menu-item px-4 py-3 rounded-lg cursor-pointer mb-2" onclick="showTab('preview')">
                        <i class="fas fa-eye mr-3"></i>ë¯¸ë¦¬ë³´ê¸°
                    </div>
                </div>
            <div class="menu-item px-4 py-3 rounded-lg cursor-pointer mb-2" onclick="showTab('footerManagement')">
                <i class="fas fa-edit mr-3"></i>í¸í° ê´ë¦¬
            </div>
            </nav>

            <div class="absolute bottom-0 w-full p-4 border-t">
                <div class="flex items-center space-x-3">
                    <div class="w-8 h-8 bg-indigo-600 rounded-full flex items-center justify-center">
                        <i class="fas fa-user text-white text-sm"></i>
                    </div>
                    <div>
                        <p class="text-sm font-medium" id="userDisplay">ê´ë¦¬ì</p>
                        <button onclick="logout()" class="text-xs text-gray-500 hover:text-gray-700">ë¡ê·¸ìì</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ë©ì¸ ì½íì¸  -->
        <div id="mainContent" class="main-content flex-1 ml-64">
            <!-- í¤ë -->
            <header class="bg-white shadow-sm border-b p-4">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-4">
                        <button id="sidebarToggle" class="lg:hidden">
                            <i class="fas fa-bars text-gray-600"></i>
                        </button>
                        <h2 id="pageTitle" class="text-xl font-semibold text-gray-800">ëìë³´ë</h2>
                    </div>
                    <div class="flex items-center space-x-4">
                        <div id="githubStatus" class="px-3 py-1 rounded-full text-sm github-disconnected">
                            <i class="fab fa-github mr-2"></i>GitHub ì°ê²° ìë¨
                        </div>
                        <button onclick="saveAll()" class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md text-sm">
                            <i class="fas fa-save mr-2"></i>ëª¨ë  ë³ê²½ì¬í­ ì ì¥
                        </button>
                    </div>
                </div>
            </header>

            <!-- í­ ì½íì¸  -->
            <div class="p-6">
                <!-- ëìë³´ë -->
                <div id="dashboard" class="tab-content active">
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <div class="bg-white rounded-lg shadow p-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600">ì´ ë´ì¤</p>
                                    <p class="text-2xl font-bold text-gray-800" id="totalNews">0</p>
                                                        <!-- ë°©ë¬¸ì íµê³ ì¹´ëë¤ -->
                        <div class="bg-white rounded-lg shadow p-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600">ì¼ì¼ ë°©ë¬¸ì</p>
                                    <p class="text-2xl font-bold text-gray-800" id="dailyVisitors">0</p>
                                </div>
                                <i class="fas fa-users text-3xl text-green-500"></i>
                            </div>
                        </div>
                        <div class="bg-white rounded-lg shadow p-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600">ëì  ë°©ë¬¸ì</p>
                                    <p class="text-2xl font-bold text-gray-800" id="totalVisitors">0</p>
                                </div>
                                <i class="fas fa-chart-line text-3xl text-purple-500"></i>
                            </div>
                        </div>
                    </div>
                                <i class="fas fa-newspaper text-3xl text-blue-500"></i>
                            </div>
                        </div>
                        <div class="bg-white rounded-lg shadow p-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600">ì´ ìë£</p>
                                    <p class="text-2xl font-bold text-gray-800" id="totalResources">0</p>
                                </div>
                                <i class="fas fa-book text-3xl text-green-500"></i>
                            </div>
                        </div>
                        <div class="bg-white rounded-lg shadow p-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600">API ì¬ì©ë</p>
                                    <p class="text-2xl font-bold text-gray-800">2,450</p>
                                </div>
                                <i class="fas fa-chart-line text-3xl text-purple-500"></i>
                            </div>
                        </div>
                        <div class="bg-white rounded-lg shadow p-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600">ë§ì§ë§ ë°±ì</p>
                                    <p class="text-sm font-medium text-gray-800" id="lastBackup">1ìê° ì </p>
                                </div>
                                <i class="fas fa-cloud text-3xl text-orange-500"></i>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="bg-white rounded-lg shadow p-6">
                            <h3 class="text-lg font-semibold mb-4">ìµê·¼ íë</h3>
                            <div id="recentActivity" class="space-y-3">
                                <div class="flex items-center space-x-3 p-3 bg-gray-50 rounded-lg">
                                    <i class="fas fa-plus-circle text-green-500"></i>
                                    <div>
                                        <p class="text-sm font-medium">ì ë´ì¤ ì¶ê°ë¨</p>
                                        <p class="text-xs text-gray-500">5ë¶ ì </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="bg-white rounded-lg shadow p-6">
                            <h3 class="text-lg font-semibold mb-4">ë¹ ë¥¸ ìì</h3>
                            <div class="grid grid-cols-2 gap-3">
                                <button onclick="showTab('news')" class="bg-blue-500 hover:bg-blue-600 text-white p-3 rounded-lg text-sm">
                                    <i class="fas fa-plus mr-2"></i>ë´ì¤ ì¶ê°
                                </button>
                                <button onclick="showTab('resources')" class="bg-green-500 hover:bg-green-600 text-white p-3 rounded-lg text-sm">
                                    <i class="fas fa-upload mr-2"></i>ìë£ ìë¡ë
                                </button>
                                <button onclick="showTab('popup')" class="bg-purple-500 hover:bg-purple-600 text-white p-3 rounded-lg text-sm">
                                    <i class="fas fa-window-restore mr-2"></i>íì ìì±
                                </button>
                                <button onclick="showTab('preview')" class="bg-orange-500 hover:bg-orange-600 text-white p-3 rounded-lg text-sm">
                                    <i class="fas fa-eye mr-2"></i>ë¯¸ë¦¬ë³´ê¸°
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ë´ì¤ ê´ë¦¬ -->
                <div id="news" class="tab-content">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-semibold">ë´ì¤ ê´ë¦¬</h3>
                        <button onclick="showNewsEditor()" class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md">
                            <i class="fas fa-plus mr-2"></i>ì ë´ì¤ ìì±
                        </button>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- ë´ì¤ ëª©ë¡ -->
                        <div class="bg-white rounded-lg shadow">
                            <div class="p-6 border-b">
                                <h4 class="font-medium">ê²ìë ë´ì¤</h4>
                            </div>
                            <div id="newsList" class="p-6">
                                <!-- ë´ì¤ ëª©ë¡ì´ ì¬ê¸°ì ëì ì¼ë¡ ì¶ê°ë©ëë¤ -->
                            </div>
                        </div>

                        <!-- ë´ì¤ ìëí° -->
                        <div id="newsEditor" class="bg-white rounded-lg shadow" style="display: none;">
                            <div class="p-6 border-b">
                                <h4 class="font-medium">ë´ì¤ ìì±/ìì </h4>
                            </div>
                            <div class="p-6">
                                <form id="newsForm">
                                    <div class="mb-4">
                                        <label class="block text-sm font-medium text-gray-700 mb-2">ì ëª©</label>
                                        <input type="text" id="newsTitle" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500" required>
                                    </div>
                                    <div class="mb-4">
                                        <label class="block text-sm font-medium text-gray-700 mb-2">ì¹´íê³ ë¦¬</label>
                                        <select id="newsCategory" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500">
                                            <option value="ì¤ì">ì¤ì</option>
                                            <option value="íì¬">íì¬</option>
                                            <option value="ìì ">ìì </option>
                                            <option value="ì¼ë°">ì¼ë°</option>
                                        </select>
                                    </div>
                                    <div class="mb-4">
                                        <label class="block text-sm font-medium text-gray-700 mb-2">ë´ì©</label>
                                        <textarea id="newsContent" class="editor w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500" rows="6" required></textarea>
                                    </div>
                                    <div class="mb-4">
                                        <label class="block text-sm font-medium text-gray-700 mb-2">ë ì§</label>
                                        <input type="date" id="newsDate" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500" required>
                                    </div>
                                    <div class="flex space-x-3">
                                        <button type="submit" class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md">
                                            <i class="fas fa-save mr-2"></i>ì ì¥
                                        </button>
                                        <button type="button" onclick="cancelNewsEdit()" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-md">
                                            ì·¨ì
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ìë£ ê´ë¦¬ -->
                <div id="resources" class="tab-content">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-semibold">ìë£ ê´ë¦¬</h3>
                        <button onclick="showResourceEditor()" class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md">
                            <i class="fas fa-plus mr-2"></i>ì ìë£ ì¶ê°
                        </button>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <!-- ê¸°ëêµ ê¸°ì¬ -->
                        <div class="bg-white rounded-lg shadow">
                            <div class="p-6 border-b">
                                <h4 class="font-medium">ê¸°ëêµ ê¸°ì¬</h4>
                            </div>
                            <div id="articlesList" class="p-6">
                                <!-- ê¸°ì¬ ëª©ë¡ -->
                            </div>
                        </div>

                        <!-- ì í ë¼ë¬¸ -->
                        <div class="bg-white rounded-lg shadow">
                            <div class="p-6 border-b">
                                <h4 class="font-medium">ì í ë¼ë¬¸</h4>
                            </div>
                            <div id="papersList" class="p-6">
                                <!-- ë¼ë¬¸ ëª©ë¡ -->
                            </div>
                        </div>

                        <!-- ë¤ì´ë¡ë ìë£ -->
                        <div class="bg-white rounded-lg shadow">
                            <div class="p-6 border-b">
                                <h4 class="font-medium">ë¤ì´ë¡ë ìë£</h4>
                            </div>
                            <div id="downloadsList" class="p-6">
                                <!-- ë¤ì´ë¡ë ìë£ ëª©ë¡ -->
                            </div>
                        </div>
                    </div>

                    <!-- ìë£ ìëí° -->
                    <div id="resourceEditor" class="mt-6 bg-white rounded-lg shadow" style="display: none;">
                        <div class="p-6 border-b">
                            <h4 class="font-medium">ìë£ ì¶ê°/ìì </h4>
                        </div>
                        <div class="p-6">
                            <form id="resourceForm">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">ì ëª©</label>
                                        <input type="text" id="resourceTitle" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500" required>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">ì¹´íê³ ë¦¬</label>
                                        <select id="resourceCategory" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500">
                                            <option value="articles">ê¸°ëêµ ê¸°ì¬</option>
                                            <option value="papers">ì í ë¼ë¬¸</option>
                                            <option value="downloads">ë¤ì´ë¡ë ìë£</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="mt-4">
                                    <label class="block text-sm font-medium text-gray-700 mb-2">ë§í¬ ëë íì¼</label>
                                    <input type="url" id="resourceUrl" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="http://example.com">
                                </div>
                                <div class="mt-4">
                                    <label class="block text-sm font-medium text-gray-700 mb-2">ì¤ëª</label>
                                    <textarea id="resourceDescription" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500" rows="3"></textarea>
                                </div>
                                <div class="mt-6 flex space-x-3">
                                    <button type="submit" class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md">
                                        <i class="fas fa-save mr-2"></i>ì ì¥
                                    </button>
                                    <button type="button" onclick="cancelResourceEdit()" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-md">
                                        ì·¨ì
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- ìì ê´ë¦¬ -->
                <div id="videos" class="tab-content">
                    <h3 class="text-xl font-semibold mb-6">ìì ê´ë¦¬</h3>
                    <div class="bg-white rounded-lg shadow p-6">
                        <div class="mb-4">
                            <h4 class="font-medium mb-2">YouTube API ìí</h4>
                            <div class="flex items-center space-x-4">
                                <div class="flex items-center">
                                    <div class="w-3 h-3 bg-green-500 rounded-full mr-2"></div>
                                    <span class="text-sm">API í¤: AIzaSyBFCq...ZeEV6Q</span>
                                </div>
                                <div class="flex items-center">
                                    <div class="w-3 h-3 bg-yellow-500 rounded-full mr-2"></div>
                                    <span class="text-sm">ì¬ì©ë: 2,450/10,000</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <h5 class="font-medium mb-3">ì¤ì°ëê´êµí ì±ë</h5>
                                <div class="space-y-2">
                                    <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                        <span class="text-sm">ìµì  ìì ì: 12ê°</span>
                                        <button class="text-indigo-600 hover:text-indigo-800 text-sm">ìë¡ê³ ì¹¨</button>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <h5 class="font-medium mb-3">DGM TV ì±ë</h5>
                                <div class="space-y-2">
                                    <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                        <span class="text-sm">ìµì  ìì ì: 8ê°</span>
                                        <button class="text-indigo-600 hover:text-indigo-800 text-sm">ìë¡ê³ ì¹¨</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- íì´ì§ ìì  -->
                <div id="pages" class="tab-content">
                    <h3 class="text-xl font-semibold mb-6">íì´ì§ ìì </h3>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="bg-white rounded-lg shadow p-6">
                            <h4 class="font-medium mb-4">ë©ì¸ ë°°ë íì¤í¸</h4>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">ë©ì¸ ì ëª©</label>
                                    <input type="text" id="mainTitle" class="w-full px-3 py-2 border border-gray-300 rounded-md" value="ë¯¿ìê³¼ ìë§, ê·¸ë¦¬ê³  ì¬ë">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">ìë¸ ì ëª©</label>
                                    <input type="text" id="subTitle" class="w-full px-3 py-2 border border-gray-300 rounded-md" value="ìê°ì ì£¼ë ì´ì¼ê¸°ì ììì´ ë§ëë ê³³">
                                </div>
                                <button onclick="updateMainBanner()" class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md">
                                    ë°°ë íì¤í¸ ìë°ì´í¸
                                </button>
                            </div>
                        </div>

                        <div class="bg-white rounded-lg shadow p-6">
                            <h4 class="font-medium mb-4">ì°ë½ì² ì ë³´</h4>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">ì íë²í¸</label>
                                    <input type="text" id="phoneNumber" class="w-full px-3 py-2 border border-gray-300 rounded-md" value="031-377-0675">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">ì´ë©ì¼</label>
                                    <input type="email" id="emailAddress" class="w-full px-3 py-2 border border-gray-300 rounded-md" value="derek1817@naver.com">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">ì£¼ì</label>
                                    <input type="text" id="address" class="w-full px-3 py-2 border border-gray-300 rounded-md" value="ê²½ê¸°ë ì¤ì°ì ê¶ë¦¬ì¬ë¡46ë²ê¸¸ 60-5">
                                </div>
                                <button onclick="updateContact()" class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md">
                                    ì°ë½ì² ìë°ì´í¸
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- íì ê´ë¦¬ -->
                <div id="popup" class="tab-content">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-semibold">íì ê´ë¦¬</h3>
                        <button onclick="showPopupEditor()" class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md">
                            <i class="fas fa-plus mr-2"></i>ì íì ìì±
                        </button>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="bg-white rounded-lg shadow">
                            <div class="p-6 border-b">
                                <h4 class="font-medium">íì± íì</h4>
                            </div>
                            <div id="popupList" class="p-6">
                                <!-- íì ëª©ë¡ -->
                            </div>
                        </div>

                        <div id="popupEditor" class="bg-white rounded-lg shadow" style="display: none;">
                            <div class="p-6 border-b">
                                <h4 class="font-medium">íì ìì±/ìì </h4>
                            </div>
                            <div class="p-6">
                                <form id="popupForm">
                                    <div class="mb-4">
                                        <label class="block text-sm font-medium text-gray-700 mb-2">íì ì ëª©</label>
                                        <input type="text" id="popupTitle" class="w-full px-3 py-2 border border-gray-300 rounded-md" required>
                                    </div>
                                    <div class="mb-4">
                                        <label class="block text-sm font-medium text-gray-700 mb-2">ë´ì©</label>
                                        <textarea id="popupContent" class="w-full px-3 py-2 border border-gray-300 rounded-md" rows="4" required></textarea>
                                    </div>
                                    <div class="mb-4">
                                        <label class="flex items-center">
                                            <input type="checkbox" id="popupEnabled" class="mr-2">
                                            <span class="text-sm">íì íì±í</span>
                                        </label>
                                    </div>
                                    <div class="flex space-x-3">
                                        <button type="submit" class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md">
                                            ì ì¥
                                        </button>
                                        <button type="button" onclick="cancelPopupEdit()" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-md">
                                            ì·¨ì
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ì¤ì  -->
                <div id="settings" class="tab-content">
                    <h3 class="text-xl font-semibold mb-6">ì¤ì </h3>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="bg-white rounded-lg shadow p-6">
                            <h4 class="font-medium mb-4">GitHub ì°ë ì¤ì </h4>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">GitHub Token</label>
                                    <input type="password" id="githubToken" class="w-full px-3 py-2 border border-gray-300 rounded-md" placeholder="ghp_xxxxxxxxxxxxxxxxxxxx">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Repository</label>
                                    <input type="text" id="githubRepo" class="w-full px-3 py-2 border border-gray-300 rounded-md" value="osandaegwang/osandaegwang.github.io">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Branch</label>
                                    <input type="text" id="githubBranch" class="w-full px-3 py-2 border border-gray-300 rounded-md" value="main">
                                </div>
                                <button onclick="testGitHubConnection()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md">
                                    <i class="fab fa-github mr-2"></i>ì°ê²° íì¤í¸
                                </button>
                            </div>
                        </div>

                        <div class="bg-white rounded-lg shadow p-6">
                            <h4 class="font-medium mb-4">ë°±ì ë° ë³µì</h4>
                            <div class="space-y-4">
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                    <div>
                                        <p class="font-medium">ìë ë°±ì</p>
                                        <p class="text-sm text-gray-600">ë§¤ì¼ ìì ì ìë ë°±ì</p>
                                    </div>
                                    <label class="switch">
                                        <input type="checkbox" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                                <div class="space-y-2">
                                    <button onclick="createBackup()" class="w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md">
                                        <i class="fas fa-download mr-2"></i>ìë ë°±ì ìì±
                                    </button>
                                    <button onclick="restoreBackup()" class="w-full bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded-md">
                                        <i class="fas fa-upload mr-2"></i>ë°±ì ë³µì
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ë¯¸ë¦¬ë³´ê¸° -->
                <div id="preview" class="tab-content">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-semibold">ííì´ì§ ë¯¸ë¦¬ë³´ê¸°</h3>
                        <div class="flex space-x-2">
                            <button onclick="refreshPreview()" class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md">
                                <i class="fas fa-sync mr-2"></i>ìë¡ê³ ì¹¨
                            </button>
                            <button onclick="openInNewTab()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md">
                                <i class="fas fa-external-link-alt mr-2"></i>ì í­ìì ì´ê¸°
                            </button>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg shadow p-4">
                        <iframe id="previewFrame" class="preview-iframe" src="about:blank"></iframe>
                    </div>
                </div>

                    <!-- í¸í° ê´ë¦¬ í­ -->
                    <div id="footerManagement" class="tab-content">
                        <div class="bg-white rounded-lg shadow-lg p-6">
                            <div class="flex items-center justify-between mb-6">
                                <h3 class="text-xl font-semibold text-gray-800">
                                    <i class="fas fa-edit mr-2"></i>í¸í° ë©ìì§ ê´ë¦¬
                                </h3>
                            </div>

                            <div class="space-y-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">
                                        í¸í° ë©ìì§
                                    </label>
                                    <textarea 
                                        id="footerText" 
                                        rows="3" 
                                        class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:border-indigo-500"
                                        placeholder="í¸í°ì íìí  ë©ìì§ë¥¼ ìë ¥íì¸ì..."
                                    ></textarea>
                                    <p class="text-sm text-gray-500 mt-1">
                                        ííì´ì§ íë¨ì íìë  êµí ìê° ë©ìì§ìëë¤.
                                    </p>
                                </div>

                                <div class="flex space-x-3">
                                    <button 
                                        onclick="saveFooterText()" 
                                        class="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition duration-200"
                                    >
                                        <i class="fas fa-save mr-2"></i>ì ì¥
                                    </button>
                                    <button 
                                        onclick="resetFooterText()" 
                                        class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition duration-200"
                                    >
                                        <i class="fas fa-undo mr-2"></i>ê¸°ë³¸ê°ì¼ë¡ ë³µì
                                    </button>
                                </div>
                            </div>

                            <div class="mt-8 p-4 bg-gray-50 rounded-lg">
                                <h4 class="font-medium text-gray-800 mb-2">ë¯¸ë¦¬ë³´ê¸°</h4>
                                <div class="text-sm text-gray-600 italic" id="footerPreview">
                                    íëëì ì¬ëì ì¤ì²íë©° ì§ì­ì¬íì í¨ê» ì±ì¥íë êµí
                                </div>
                            </div>
                        </div>
                    </div>
            </div>
        </div>
    </div>

    <script>
        // ì ì­ ë³ì
        let currentUser = null;
        let isGitHubConnected = false;
        let editingItemId = null;

        // ë°ì´í° ì ì¥ì (ì¤ì ë¡ë localStorage ì¬ì©)
        const dataStore = {
            news: [],
            resources: {
                articles: [],
                papers: [],
                downloads: []
            },
            popups: [],
            settings: {
                mainTitle: "ë¯¿ìê³¼ ìë§, ê·¸ë¦¬ê³  ì¬ë",
                subTitle: "ìê°ì ì£¼ë ì´ì¼ê¸°ì ììì´ ë§ëë ê³³",
                phone: "031-377-0675",
                email: "derek1817@naver.com",
                address: "ê²½ê¸°ë ì¤ì°ì ê¶ë¦¬ì¬ë¡46ë²ê¸¸ 60-5",
                footerText: "íëëì ì¬ëì ì¤ì²íë©° ì§ì­ì¬íì í¨ê» ì±ì¥íë êµí"
            }
        };

        // ì´ê¸°í
        document.addEventListener('DOMContentLoaded', function() {
    console.log('DOM 로드 완료 - 초기화 시작');

    // 확실한 초기화 순서
    try {
        // 1. 이벤트 리스너 설정 (가장 중요)
        if (typeof setupEventListeners === 'function') {
            setupEventListeners();
        }

        // 2. 기본 데이터 로드
        if (typeof loadData === 'function') {
            loadData();
        }

        // 3. UI 업데이트
        if (typeof updateNewsList === 'function') {
            updateNewsList();
        }
        if (typeof updateResourcesList === 'function') {
            updateResourcesList();
        }
        if (typeof updatePopupsList === 'function') {
            updatePopupsList();
        }
        if (typeof loadFooterText === 'function') {
            loadFooterText();
        }
        if (typeof setupFooterPreview === 'function') {
            setupFooterPreview();
        }

        console.log('기본 초기화 완료');

        // 4. 동기화 시스템 초기화 (약간의 지연)
        setTimeout(function() {
            if (window.DGMTV_CMS && typeof window.DGMTV_CMS.init === 'function') {
                window.DGMTV_CMS.init();
                console.log('동기화 시스템 초기화 완료');
            }
        }, 1000);

        // 5. 로그인 모달 확실히 표시
        setTimeout(function() {
            const loginModal = document.getElementById('loginModal');
            if (loginModal) {
                loginModal.style.display = 'flex';
                loginModal.classList.add('show');
                console.log('로그인 모달 표시 완료');

                // 사용자명 입력 필드에 포커스
                const usernameInput = document.getElementById('username');
                if (usernameInput) {
                    usernameInput.focus();
                }
            }
        }, 500);

    } catch (error) {
        console.error('초기화 중 오류:', error);
    }
});

        // ì´ë²¤í¸ ë¦¬ì¤ë ì¤ì 
        function setupEventListeners() {
            console.log('이벤트 리스너 설정 시작');

            // 로그인 폼 이벤트 - 다중 방식으로 바인딩
            const loginForm = document.getElementById('loginForm');
            if (loginForm) {
                // 기존 이벤트 제거
                loginForm.removeEventListener('submit', handleLogin);

                // submit 이벤트 추가
                loginForm.addEventListener('submit', handleLogin);

                // 로그인 버튼에도 직접 이벤트 추가
                const loginButton = loginForm.querySelector('button[type="submit"]');
                if (loginButton) {
                    loginButton.addEventListener('click', function(e) {
                        e.preventDefault();
                        handleLogin(e);
                    });
                }

                console.log('로그인 폼 이벤트 리스너 설정 완료');
            } else {
                console.error('로그인 폼을 찾을 수 없습니다');
            }

            // Enter 키 이벤트도 추가
            const usernameInput = document.getElementById('username');
            const passwordInput = document.getElementById('password');

            if (usernameInput) {
                usernameInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        handleLogin(e);
                    }
                });
            }

            if (passwordInput) {
                passwordInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        handleLogin(e);
                    }
                });
            }

            // 기타 이벤트 리스너들
            try {
                const newsForm = document.getElementById('newsForm');
                if (newsForm && typeof handleNewsSave === 'function') {
                    newsForm.addEventListener('submit', handleNewsSave);
                }

                const resourceForm = document.getElementById('resourceForm');
                if (resourceForm && typeof handleResourceSave === 'function') {
                    resourceForm.addEventListener('submit', handleResourceSave);
                }

                const popupForm = document.getElementById('popupForm');
                if (popupForm && typeof handlePopupSave === 'function') {
                    popupForm.addEventListener('submit', handlePopupSave);
                }

                const sidebarToggle = document.getElementById('sidebarToggle');
                if (sidebarToggle && typeof toggleSidebar === 'function') {
                    sidebarToggle.addEventListener('click', toggleSidebar);
                }
            } catch (error) {
                console.log('일부 이벤트 리스너 설정 중 오류:', error);
            }

            console.log('모든 이벤트 리스너 설정 완료');
        }

        // ë°©ë¬¸ì íµê³ ê´ë¦¬
        function initVisitorStats() {
            // íì¬ ë ì§ ê°ì ¸ì¤ê¸° (YYYY-MM-DD íì)
            const today = new Date().toISOString().split('T')[0];

            // ë§ì§ë§ ë°©ë¬¸ ë ì§ íì¸
            const lastVisitDate = localStorage.getItem('lastVisitDate');
            let dailyCount = parseInt(localStorage.getItem('dailyVisitors') || '0');
            let totalCount = parseInt(localStorage.getItem('totalVisitors') || '0');

            // ìë¡ì´ ë ì´ë©´ ì¼ì¼ ë°©ë¬¸ì ì´ê¸°í
            if (lastVisitDate !== today) {
                dailyCount = 1;
                localStorage.setItem('lastVisitDate', today);
                localStorage.setItem('dailyVisitors', '1');
            } else {
                // ê°ì ë ì´ë©´ ì¸ì íì¸ (ì¤ë³µ ë°©ë¬¸ ë°©ì§)
                const sessionVisited = sessionStorage.getItem('sessionVisited');
                if (!sessionVisited) {
                    dailyCount++;
                    localStorage.setItem('dailyVisitors', dailyCount.toString());
                    sessionStorage.setItem('sessionVisited', 'true');
                }
            }

            // ëì  ë°©ë¬¸ì (ì²ì ë°©ë¬¸ì´ë©´ ì¦ê°)
            const hasVisitedBefore = localStorage.getItem('hasVisitedBefore');
            if (!hasVisitedBefore) {
                totalCount++;
                localStorage.setItem('totalVisitors', totalCount.toString());
                localStorage.setItem('hasVisitedBefore', 'true');
            }

            // íë©´ì íì
            updateVisitorDisplay();
        }

        function updateVisitorDisplay() {
            const dailyCount = localStorage.getItem('dailyVisitors') || '0';
            const totalCount = localStorage.getItem('totalVisitors') || '0';

            const dailyElement = document.getElementById('dailyVisitors');
            const totalElement = document.getElementById('totalVisitors');

            if (dailyElement) dailyElement.textContent = dailyCount;
            if (totalElement) totalElement.textContent = totalCount;
        }

        // ê´ë¦¬ì ì ì©: ë°©ë¬¸ì íµê³ ì´ê¸°í í¨ì
        function resetVisitorStats() {
            if (confirm('ë°©ë¬¸ì íµê³ë¥¼ ì´ê¸°ííìê² ìµëê¹?')) {
                localStorage.removeItem('dailyVisitors');
                localStorage.removeItem('totalVisitors');
                localStorage.removeItem('lastVisitDate');
                localStorage.removeItem('hasVisitedBefore');
                sessionStorage.removeItem('sessionVisited');
                updateVisitorDisplay();
                alert('ë°©ë¬¸ì íµê³ê° ì´ê¸°íëììµëë¤.');
            }


        // í¸í° íì¤í¸ ê´ë¦¬ í¨ìë¤
        function loadFooterText() {
            const footerTextElement = document.getElementById('footerText');
            const footerPreviewElement = document.getElementById('footerPreview');

            if (!dataStore.settings.footerText) {
                dataStore.settings.footerText = "íëëì ì¬ëì ì¤ì²íë©° ì§ì­ì¬íì í¨ê» ì±ì¥íë êµí";
            }

            if (footerTextElement) {
                footerTextElement.value = dataStore.settings.footerText;
            }
            if (footerPreviewElement) {
                footerPreviewElement.textContent = dataStore.settings.footerText;
            }
        }

        function saveFooterText() {
            const footerTextElement = document.getElementById('footerText');
            const footerPreviewElement = document.getElementById('footerPreview');

            if (footerTextElement) {
                const newFooterText = footerTextElement.value.trim();
                if (newFooterText) {
                    dataStore.settings.footerText = newFooterText;
                    if (footerPreviewElement) {
                        footerPreviewElement.textContent = newFooterText;
                    }
                    saveData();
                    showToast('í¸í° ë©ìì§ê° ì ì¥ëììµëë¤!', 'success');
                } else {
                    showToast('í¸í° ë©ìì§ë¥¼ ìë ¥í´ì£¼ì¸ì.', 'error');
                }
            }
        }

        function resetFooterText() {
            if (confirm('í¸í° ë©ìì§ë¥¼ ê¸°ë³¸ê°ì¼ë¡ ë³µìíìê² ìµëê¹?')) {
                const defaultText = "íëëì ì¬ëì ì¤ì²íë©° ì§ì­ì¬íì í¨ê» ì±ì¥íë êµí";
                dataStore.settings.footerText = defaultText;

                const footerTextElement = document.getElementById('footerText');
                const footerPreviewElement = document.getElementById('footerPreview');

                if (footerTextElement) {
                    footerTextElement.value = defaultText;
                }
                if (footerPreviewElement) {
                    footerPreviewElement.textContent = defaultText;
                }

                saveData();
                showToast('í¸í° ë©ìì§ê° ê¸°ë³¸ê°ì¼ë¡ ë³µìëììµëë¤!', 'success');
            }
        }

        // ì¤ìê° ë¯¸ë¦¬ë³´ê¸° ìë°ì´í¸
        function setupFooterPreview() {
            const footerTextElement = document.getElementById('footerText');
            const footerPreviewElement = document.getElementById('footerPreview');

            if (footerTextElement && footerPreviewElement) {
                footerTextElement.addEventListener('input', function() {
                    const text = this.value.trim() || "íëëì ì¬ëì ì¤ì²íë©° ì§ì­ì¬íì í¨ê» ì±ì¥íë êµí";
                    footerPreviewElement.textContent = text;
                });
            }
        }
        }

        // ë¡ê·¸ì¸ ì²ë¦¬
        function handleLogin(e) {
            e.preventDefault();
            console.log('로그인 시도 시작');

            // 입력값 가져오기
            const usernameInput = document.getElementById('username');
            const passwordInput = document.getElementById('password');

            if (!usernameInput || !passwordInput) {
                alert('로그인 폼 요소를 찾을 수 없습니다.');
                return;
            }

            const username = usernameInput.value.trim();
            const password = passwordInput.value.trim();

            console.log('입력된 사용자명:', username);
            console.log('입력된 비밀번호 길이:', password.length);

            // 간단한 유효성 검사
            if (!username || !password) {
                alert('사용자명과 비밀번호를 입력해주세요.');
                return;
            }

            // 로그인 검증 (admin / dgmtv2025)
            if (username === 'admin' && password === 'dgmtv2025') {
                console.log('로그인 성공!');

                // 전역 변수 설정
                window.currentUser = {
                    username: username,
                    role: 'admin',
                    loginTime: new Date().toISOString()
                };

                // 로그인 모달 숨기기
                const loginModal = document.getElementById('loginModal');
                if (loginModal) {
                    loginModal.style.display = 'none';
                    loginModal.classList.remove('show');
                }

                // 사용자 정보 표시
                const userDisplay = document.getElementById('userDisplay');
                if (userDisplay) {
                    userDisplay.textContent = username;
                }

                // 성공 알림
                alert('로그인 성공!');

                // 대시보드 업데이트
                if (typeof updateDashboard === 'function') {
                    updateDashboard();
                }

                // 방문자 통계 초기화
                if (typeof initVisitorStats === 'function') {
                    initVisitorStats();
                }

                console.log('로그인 처리 완료');

            } else {
                console.log('로그인 실패: 잘못된 사용자명 또는 비밀번호');
                alert('로그인 실패: 사용자명 또는 비밀번호가 틀렸습니다.

올바른 로그인 정보:
사용자명: admin
비밀번호: dgmtv2025');
            }
        };
            
            if (validUsers[username] === password) {
                currentUser = { username, role: username };
                document.getElementById('userDisplay').textContent = username;
                closeModal('loginModal');
                showToast('ë¡ê·¸ì¸ ì±ê³µ!', 'success');
                updateDashboard();
            } else {
                showToast('ë¡ê·¸ì¸ ì¤í¨: ìëª»ë ì¬ì©ìëª ëë ë¹ë°ë²í¸', 'error');
            }
        }

        // ë¡ê·¸ìì
        function logout() {
            console.log('로그아웃 시작');

            // 전역 변수 초기화
            window.currentUser = null;

            // 로그인 모달 다시 표시
            const loginModal = document.getElementById('loginModal');
            if (loginModal) {
                loginModal.style.display = 'flex';
                loginModal.classList.add('show');
            }

            // 사용자 표시 초기화
            const userDisplay = document.getElementById('userDisplay');
            if (userDisplay) {
                userDisplay.textContent = '';
            }

            // 입력 필드 초기화
            const usernameInput = document.getElementById('username');
            const passwordInput = document.getElementById('password');
            if (usernameInput) usernameInput.value = '';
            if (passwordInput) passwordInput.value = '';

            alert('로그아웃되었습니다.');
            console.log('로그아웃 완료');
        }

        // í­ ì í
        function showTab(tabName) {
            // ëª¨ë  í­ ì»¨íì¸  ì¨ê¸°ê¸°
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // ëª¨ë  ë©ë´ ìì´í ë¹íì±í
            document.querySelectorAll('.menu-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // ì íë í­ ë³´ì´ê¸°
            document.getElementById(tabName).classList.add('active');
            
            // ì íë ë©ë´ ìì´í íì±í
            event.target.closest('.menu-item').classList.add('active');
            
            // íì´ì§ ì ëª© ìë°ì´í¸
            const titles = {
                dashboard: 'ëìë³´ë',
                news: 'ë´ì¤ ê´ë¦¬',
                resources: 'ìë£ ê´ë¦¬',
                videos: 'ìì ê´ë¦¬',
                pages: 'íì´ì§ ìì ',
                popup: 'íì ê´ë¦¬',
                settings: 'ì¤ì ',
                preview: 'ë¯¸ë¦¬ë³´ê¸°'
            };
            document.getElementById('pageTitle').textContent = titles[tabName] || tabName;
            
            // í¹ë³í ì´ê¸°íê° íìí í­ë¤
            if (tabName === 'preview') {
                loadPreview();
            }
        }

        // ë´ì¤ ê´ë¦¬
        function showNewsEditor() {
            document.getElementById('newsEditor').style.display = 'block';
            document.getElementById('newsForm').reset();
            document.getElementById('newsDate').value = new Date().toISOString().split('T')[0];
            editingItemId = null;
        }

        function cancelNewsEdit() {
            document.getElementById('newsEditor').style.display = 'none';
            editingItemId = null;
        }

        function handleNewsSave(e) {
            e.preventDefault();
            
            const newsData = {
                id: editingItemId || Date.now().toString(),
                title: document.getElementById('newsTitle').value,
                category: document.getElementById('newsCategory').value,
                content: document.getElementById('newsContent').value,
                date: document.getElementById('newsDate').value,
                createdAt: new Date().toISOString()
            };
            
            if (editingItemId) {
                const index = dataStore.news.findIndex(item => item.id === editingItemId);
                if (index !== -1) {
                    dataStore.news[index] = newsData;
                }
            } else {
                dataStore.news.unshift(newsData);
            }
            
            saveData();
            updateNewsList();
            cancelNewsEdit();
            showToast(`ë´ì¤ê° ${editingItemId ? 'ìì ' : 'ì¶ê°'}ëììµëë¤!`, 'success');
            updateDashboard();
            
            // ííì´ì§ì ì¦ì ë°ì
            updateHomepageNews();
        }

        function editNews(id) {
            const news = dataStore.news.find(item => item.id === id);
            if (news) {
                document.getElementById('newsTitle').value = news.title;
                document.getElementById('newsCategory').value = news.category;
                document.getElementById('newsContent').value = news.content;
                document.getElementById('newsDate').value = news.date;
                editingItemId = id;
                showNewsEditor();
            }
        }

        function deleteNews(id) {
            if (confirm('ì ë§ë¡ ì´ ë´ì¤ë¥¼ ì­ì íìê² ìµëê¹?')) {
                dataStore.news = dataStore.news.filter(item => item.id !== id);
                saveData();
                updateNewsList();
                showToast('ë´ì¤ê° ì­ì ëììµëë¤.', 'success');
                updateDashboard();
                updateHomepageNews();
            }
        }

        function updateNewsList() {
            const newsList = document.getElementById('newsList');
            newsList.innerHTML = '';
            
            if (dataStore.news.length === 0) {
                newsList.innerHTML = '<p class="text-gray-500 text-center">ë±ë¡ë ë´ì¤ê° ììµëë¤.</p>';
                return;
            }
            
            dataStore.news.forEach(news => {
                const newsItem = document.createElement('div');
                newsItem.className = 'border-b pb-4 mb-4 last:border-b-0';
                newsItem.innerHTML = `
                    <div class="flex items-start justify-between">
                        <div class="flex-1">
                            <div class="flex items-center space-x-2 mb-2">
                                <span class="px-2 py-1 text-xs rounded-full bg-${getCategoryColor(news.category)}-100 text-${getCategoryColor(news.category)}-800">
                                    ${news.category}
                                </span>
                                <span class="text-sm text-gray-500">${news.date}</span>
                            </div>
                            <h5 class="font-medium text-gray-800 mb-1">${news.title}</h5>
                            <p class="text-sm text-gray-600 line-clamp-2">${news.content}</p>
                        </div>
                        <div class="flex space-x-2 ml-4">
                            <button onclick="editNews('${news.id}')" class="text-blue-600 hover:text-blue-800">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button onclick="deleteNews('${news.id}')" class="text-red-600 hover:text-red-800">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                `;
                newsList.appendChild(newsItem);
            });
        }

        // ìë£ ê´ë¦¬
        function showResourceEditor() {
            document.getElementById('resourceEditor').style.display = 'block';
            document.getElementById('resourceForm').reset();
            editingItemId = null;
        }

        function cancelResourceEdit() {
            document.getElementById('resourceEditor').style.display = 'none';
            editingItemId = null;
        }

        function handleResourceSave(e) {
            e.preventDefault();
            
            const resourceData = {
                id: editingItemId || Date.now().toString(),
                title: document.getElementById('resourceTitle').value,
                category: document.getElementById('resourceCategory').value,
                url: document.getElementById('resourceUrl').value,
                description: document.getElementById('resourceDescription').value,
                createdAt: new Date().toISOString()
            };
            
            const category = resourceData.category;
            
            if (editingItemId) {
                const index = dataStore.resources[category].findIndex(item => item.id === editingItemId);
                if (index !== -1) {
                    dataStore.resources[category][index] = resourceData;
                }
            } else {
                dataStore.resources[category].unshift(resourceData);
            }
            
            saveData();
            updateResourcesList();
            cancelResourceEdit();
            showToast(`ìë£ê° ${editingItemId ? 'ìì ' : 'ì¶ê°'}ëììµëë¤!`, 'success');
            updateDashboard();
            
            // ííì´ì§ì ì¦ì ë°ì
            updateHomepageResources();
        }

        function updateResourcesList() {
            const categories = ['articles', 'papers', 'downloads'];
            const containerIds = ['articlesList', 'papersList', 'downloadsList'];
            
            categories.forEach((category, index) => {
                const container = document.getElementById(containerIds[index]);
                container.innerHTML = '';
                
                const resources = dataStore.resources[category];
                
                if (resources.length === 0) {
                    container.innerHTML = '<p class="text-gray-500 text-center text-sm">ë±ë¡ë ìë£ê° ììµëë¤.</p>';
                    return;
                }
                
                resources.forEach(resource => {
                    const resourceItem = document.createElement('div');
                    resourceItem.className = 'border-b pb-3 mb-3 last:border-b-0';
                    resourceItem.innerHTML = `
                        <div class="flex items-start justify-between">
                            <div class="flex-1">
                                <h6 class="font-medium text-sm text-gray-800 mb-1">${resource.title}</h6>
                                <p class="text-xs text-gray-600 mb-2">${resource.description || ''}</p>
                                <a href="${resource.url}" target="_blank" class="text-xs text-blue-600 hover:text-blue-800">
                                    <i class="fas fa-external-link-alt mr-1"></i>ë§í¬ ì´ê¸°
                                </a>
                            </div>
                            <button onclick="deleteResource('${category}', '${resource.id}')" class="text-red-600 hover:text-red-800 ml-2">
                                <i class="fas fa-trash text-xs"></i>
                            </button>
                        </div>
                    `;
                    container.appendChild(resourceItem);
                });
            });
        }

        function deleteResource(category, id) {
            if (confirm('ì ë§ë¡ ì´ ìë£ë¥¼ ì­ì íìê² ìµëê¹?')) {
                dataStore.resources[category] = dataStore.resources[category].filter(item => item.id !== id);
                saveData();
                updateResourcesList();
                showToast('ìë£ê° ì­ì ëììµëë¤.', 'success');
                updateDashboard();
                updateHomepageResources();
            }
        }

        // íì ê´ë¦¬
        function showPopupEditor() {
            document.getElementById('popupEditor').style.display = 'block';
            document.getElementById('popupForm').reset();
            editingItemId = null;
        }

        function cancelPopupEdit() {
            document.getElementById('popupEditor').style.display = 'none';
            editingItemId = null;
        }

        function handlePopupSave(e) {
            e.preventDefault();
            
            const popupData = {
                id: editingItemId || Date.now().toString(),
                title: document.getElementById('popupTitle').value,
                content: document.getElementById('popupContent').value,
                enabled: document.getElementById('popupEnabled').checked,
                createdAt: new Date().toISOString()
            };
            
            if (editingItemId) {
                const index = dataStore.popups.findIndex(item => item.id === editingItemId);
                if (index !== -1) {
                    dataStore.popups[index] = popupData;
                }
            } else {
                dataStore.popups.unshift(popupData);
            }
            
            saveData();
            updatePopupsList();
            cancelPopupEdit();
            showToast(`íìì´ ${editingItemId ? 'ìì ' : 'ìì±'}ëììµëë¤!`, 'success');
            
            // ííì´ì§ì ì¦ì ë°ì
            updateHomepagePopups();
        }

        function updatePopupsList() {
            const popupList = document.getElementById('popupList');
            popupList.innerHTML = '';
            
            if (dataStore.popups.length === 0) {
                popupList.innerHTML = '<p class="text-gray-500 text-center">ë±ë¡ë íìì´ ììµëë¤.</p>';
                return;
            }
            
            dataStore.popups.forEach(popup => {
                const popupItem = document.createElement('div');
                popupItem.className = 'border-b pb-4 mb-4 last:border-b-0';
                popupItem.innerHTML = `
                    <div class="flex items-start justify-between">
                        <div class="flex-1">
                            <div class="flex items-center space-x-2 mb-2">
                                <span class="w-3 h-3 rounded-full ${popup.enabled ? 'bg-green-500' : 'bg-gray-400'}"></span>
                                <span class="text-sm ${popup.enabled ? 'text-green-600' : 'text-gray-500'}">
                                    ${popup.enabled ? 'íì±' : 'ë¹íì±'}
                                </span>
                            </div>
                            <h5 class="font-medium text-gray-800 mb-1">${popup.title}</h5>
                            <p class="text-sm text-gray-600">${popup.content}</p>
                        </div>
                        <div class="flex space-x-2 ml-4">
                            <button onclick="editPopup('${popup.id}')" class="text-blue-600 hover:text-blue-800">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button onclick="deletePopup('${popup.id}')" class="text-red-600 hover:text-red-800">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                `;
                popupList.appendChild(popupItem);
            });
        }

        function editPopup(id) {
            const popup = dataStore.popups.find(item => item.id === id);
            if (popup) {
                document.getElementById('popupTitle').value = popup.title;
                document.getElementById('popupContent').value = popup.content;
                document.getElementById('popupEnabled').checked = popup.enabled;
                editingItemId = id;
                showPopupEditor();
            }
        }

        function deletePopup(id) {
            if (confirm('ì ë§ë¡ ì´ íìì ì­ì íìê² ìµëê¹?')) {
                dataStore.popups = dataStore.popups.filter(item => item.id !== id);
                saveData();
                updatePopupsList();
                showToast('íìì´ ì­ì ëììµëë¤.', 'success');
                updateHomepagePopups();
            }
        }

        // íì´ì§ ìì 
        function updateMainBanner() {
            dataStore.settings.mainTitle = document.getElementById('mainTitle').value;
            dataStore.settings.subTitle = document.getElementById('subTitle').value;
            saveData();
            showToast('ë©ì¸ ë°°ëê° ìë°ì´í¸ëììµëë¤!', 'success');
            updateHomepageBanner();
        }

        function updateContact() {
            dataStore.settings.phone = document.getElementById('phoneNumber').value;
            dataStore.settings.email = document.getElementById('emailAddress').value;
            dataStore.settings.address = document.getElementById('address').value;
            saveData();
            showToast('ì°ë½ì² ì ë³´ê° ìë°ì´í¸ëììµëë¤!', 'success');
            updateHomepageContact();
        }

        // GitHub ì°ë
        function testGitHubConnection() {
            const token = document.getElementById('githubToken').value;
            const repo = document.getElementById('githubRepo').value;
            
            if (!token || !repo) {
                showToast('GitHub Tokenê³¼ Repositoryë¥¼ ìë ¥í´ì£¼ì¸ì.', 'error');
                return;
            }
            
            // GitHub API íì¤í¸
            fetch(`https://api.github.com/repos/${repo}`, {
                headers: {
                    'Authorization': `token ${token}`,
                    'Accept': 'application/vnd.github.v3+json'
                }
            })
            .then(response => {
                if (response.ok) {
                    isGitHubConnected = true;
                    document.getElementById('githubStatus').className = 'px-3 py-1 rounded-full text-sm github-connected';
                    document.getElementById('githubStatus').innerHTML = '<i class="fab fa-github mr-2"></i>GitHub ì°ê²°ë¨';
                    showToast('GitHub ì°ê²° ì±ê³µ!', 'success');
                    localStorage.setItem('githubToken', token);
                    localStorage.setItem('githubRepo', repo);
                } else {
                    throw new Error('ì°ê²° ì¤í¨');
                }
            })
            .catch(error => {
                showToast('GitHub ì°ê²° ì¤í¨: ' + error.message, 'error');
            });
        }

        // ííì´ì§ ì¤ìê° ìë°ì´í¸ í¨ìë¤
        function updateHomepageNews() {
            console.log('ë´ì¤ ìë°ì´í¸ë¨:', dataStore.news);
            // ì¤ì ë¡ë GitHub APIë¥¼ íµí´ ííì´ì§ HTML íì¼ì ìì 
            if (isGitHubConnected) {
                commitToGitHub('ë´ì¤ ìë°ì´í¸', generateNewsHTML());
            }
        }

        function updateHomepageResources() {
            console.log('ìë£ ìë°ì´í¸ë¨:', dataStore.resources);
            if (isGitHubConnected) {
                commitToGitHub('ìë£ì¤ ìë°ì´í¸', generateResourcesHTML());
            }
        }

        function updateHomepagePopups() {
            console.log('íì ìë°ì´í¸ë¨:', dataStore.popups);
            if (isGitHubConnected) {
                commitToGitHub('íì ìë°ì´í¸', generatePopupJS());
            }
        }

        function updateHomepageBanner() {
            console.log('ë°°ë ìë°ì´í¸ë¨:', dataStore.settings);
            if (isGitHubConnected) {
                commitToGitHub('ë©ì¸ ë°°ë ìë°ì´í¸', generateBannerHTML());
            }
        }

        function updateHomepageContact() {
            console.log('ì°ë½ì² ìë°ì´í¸ë¨:', dataStore.settings);
            if (isGitHubConnected) {
                commitToGitHub('ì°ë½ì² ì ë³´ ìë°ì´í¸', generateContactHTML());
            }
        }

        // GitHub ì»¤ë° í¨ì
        async function commitToGitHub(message, content) {
            const token = localStorage.getItem('githubToken');
            const repo = localStorage.getItem('githubRepo');
            
            if (!token || !repo) {
                showToast('GitHub ì¤ì ì ë¨¼ì  ìë£í´ì£¼ì¸ì.', 'warning');
                return;
            }
            
            try {
                // ì¤ì  GitHub API í¸ì¶ë¡ íì¼ ìë°ì´í¸
                const response = await fetch(`https://api.github.com/repos/${repo}/contents/index.html`, {
                    method: 'PUT',
                    headers: {
                        'Authorization': `token ${token}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        message: `[CMS] ${message}`,
                        content: btoa(unescape(encodeURIComponent(content))),
                        sha: await getFileSHA(repo, 'index.html', token)
                    })
                });
                
                if (response.ok) {
                    showToast('ííì´ì§ê° ìë°ì´í¸ëììµëë¤!', 'success');
                } else {
                    throw new Error('GitHub ìë°ì´í¸ ì¤í¨');
                }
            } catch (error) {
                console.error('GitHub ìë°ì´í¸ ì¤ë¥:', error);
                showToast('ííì´ì§ ìë°ì´í¸ì ì¤í¨íìµëë¤.', 'error');
            }
        }

        async function getFileSHA(repo, path, token) {
            try {
                const response = await fetch(`https://api.github.com/repos/${repo}/contents/${path}`, {
                    headers: {
                        'Authorization': `token ${token}`
                    }
                });
                const data = await response.json();
                return data.sha;
            } catch (error) {
                console.error('SHA ê°ì ¸ì¤ê¸° ì¤í¨:', error);
                return null;
            }
        }

        // HTML ìì± í¨ìë¤
        function generateNewsHTML() {
            let newsHTML = '';
            dataStore.news.slice(0, 3).forEach(news => {
                const categoryColor = getCategoryColor(news.category);
                newsHTML += `
                    <article class="bg-gray-50 rounded-lg overflow-hidden shadow-md">
                        <div class="h-48 bg-gradient-to-r from-blue-400 to-indigo-500 flex items-center justify-center">
                            <i class="fas fa-newspaper text-4xl text-white"></i>
                        </div>
                        <div class="p-6">
                            <div class="flex items-center mb-2">
                                <span class="bg-${categoryColor}-100 text-${categoryColor}-800 text-xs px-2 py-1 rounded-full">${news.category}</span>
                                <span class="text-gray-500 text-sm ml-2">${news.date}</span>
                            </div>
                            <h3 class="text-lg font-semibold mb-3">${news.title}</h3>
                            <p class="text-gray-600 text-sm mb-4">${news.content.substring(0, 100)}...</p>
                            <a href="#" class="text-indigo-600 text-sm font-semibold hover:text-indigo-800">ìì¸í ë³´ê¸°</a>
                        </div>
                    </article>
                `;
            });
            return newsHTML;
        }

        function generateResourcesHTML() {
            // ìë£ì¤ HTML ìì± ë¡ì§
            return '<div>ìë£ì¤ ìë°ì´í¸ ìë£</div>';
        }

        function generatePopupJS() {
            // íì JavaScript ìì± ë¡ì§
            const activePopup = dataStore.popups.find(popup => popup.enabled);
            if (activePopup) {
                return `
                    const popupData = {
                        title: "${activePopup.title}",
                        content: "${activePopup.content}",
                        enabled: true
                    };
                    localStorage.setItem('sitePopup', JSON.stringify(popupData));
                `;
            }
            return '';
        }

        function generateBannerHTML() {
            return `
                <h2 class="text-4xl md:text-6xl font-bold mb-6">${dataStore.settings.mainTitle}</h2>
                <p class="text-xl md:text-2xl mb-8">${dataStore.settings.subTitle}</p>
            `;
        }

        function generateContactHTML() {
            return `
                <li><i class="fas fa-phone mr-2"></i><a href="tel:${dataStore.settings.phone}">${dataStore.settings.phone}</a></li>
                <li><i class="fas fa-envelope mr-2"></i><a href="mailto:${dataStore.settings.email}">${dataStore.settings.email}</a></li>
                <li><i class="fas fa-map-marker-alt mr-2"></i>${dataStore.settings.address}</li>
                <li class="mt-4 pt-4 border-t border-gray-300"><i class="fas fa-heart mr-2 text-red-500"></i>${dataStore.settings.footerText || "íëëì ì¬ëì ì¤ì²íë©° ì§ì­ì¬íì í¨ê» ì±ì¥íë êµí"}</li>
            `;
        }

        // ë¯¸ë¦¬ë³´ê¸°
        function loadPreview() {
            const previewFrame = document.getElementById('previewFrame');
            // ì¤ì  ííì´ì§ URL ëë ìì±ë HTMLì íì
            previewFrame.src = 'https://osandaekwang.github.io/';
        }

        function refreshPreview() {
            const previewFrame = document.getElementById('previewFrame');
            previewFrame.src = previewFrame.src;
            showToast('ë¯¸ë¦¬ë³´ê¸°ê° ìë¡ê³ ì¹¨ëììµëë¤.', 'success');
        }

        function openInNewTab() {
            window.open('https://osandaekwang.github.io/', '_blank');
        }

        // ëìë³´ë ìë°ì´í¸
        function updateDashboard() {
            document.getElementById('totalNews').textContent = dataStore.news.length;
            
            const totalResources = Object.values(dataStore.resources).reduce((sum, arr) => sum + arr.length, 0);
            document.getElementById('totalResources').textContent = totalResources;
            
            document.getElementById('lastBackup').textContent = new Date().toLocaleString('ko-KR');
            
            updateNewsList();
            updateResourcesList();
            updatePopupsList();
            loadFooterText();
            setupFooterPreview();
        }

        // ì í¸ë¦¬í° í¨ìë¤
        function getCategoryColor(category) {
            const colors = {
                'ì¤ì': 'red',
                'íì¬': 'green',
                'ìì ': 'blue',
                'ì¼ë°': 'gray'
            };
            return colors[category] || 'gray';
        }

        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = `toast ${type} show`;
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.remove('show');
                console.log('ëª¨ë¬ ë«í:', modalId);
            }
        }

        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('mainContent');
            
            sidebar.classList.toggle('sidebar-collapsed');
            mainContent.classList.toggle('main-content-expanded');
        }

        function saveAll() {
            saveData();
            if (isGitHubConnected) {
                commitToGitHub('ì ì²´ ìë°ì´í¸', generateFullHTML());
                showToast('ëª¨ë  ë³ê²½ì¬í­ì´ ì ì¥ëê³  ííì´ì§ì ë°ìëììµëë¤!', 'success');
            } else {
                showToast('ë¡ì»¬ì ì ì¥ëììµëë¤. GitHub ì°ê²° í ííì´ì§ì ë°ìí  ì ììµëë¤.', 'warning');
            }
        }

        function generateFullHTML() {
            // ì ì²´ ííì´ì§ HTML ìì±
            return `<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¤ì°ëê´êµí & DGM TV</title>
    <!-- ì¤íì¼ê³¼ ì¤í¬ë¦½í¸ë ê¸°ì¡´ê³¼ ëì¼ -->
    <script>

// ê³µíµ ë°ì´í° êµ¬ì¡° ë° ëê¸°í ìì¤í
window.DGMTV_SHARED = window.DGMTV_SHARED || {
    // ë°ì´í° í¤ ìì
    KEYS: {
        NEWS: 'dgmtv_news',
        RESOURCES: 'dgmtv_resources', 
        FOOTER_TEXT: 'dgmtv_footer_text',
        VISITOR_STATS: 'dgmtv_visitor_stats',
        SETTINGS: 'dgmtv_settings',
        LAST_UPDATE: 'dgmtv_last_update'
    },

    // ë°ì´í° ê°ì ¸ì¤ê¸°
    getData: function(key, defaultValue = null) {
        try {
            const data = localStorage.getItem(key);
            return data ? JSON.parse(data) : defaultValue;
        } catch (e) {
            console.error('ë°ì´í° ì½ê¸° ì¤ë¥:', e);
            return defaultValue;
        }
    },

    // ë°ì´í° ì ì¥
    setData: function(key, value) {
        try {
            localStorage.setItem(key, JSON.stringify(value));
            localStorage.setItem(this.KEYS.LAST_UPDATE, Date.now());
            this.notifyUpdate(key, value);
            return true;
        } catch (e) {
            console.error('ë°ì´í° ì ì¥ ì¤ë¥:', e);
            return false;
        }
    },

    // ìë°ì´í¸ ìë¦¼
    notifyUpdate: function(key, value) {
        // ë¤ë¥¸ ì°½/í­ì ë³ê²½ì¬í­ ìë¦¼
        try {
            window.dispatchEvent(new CustomEvent('dgmtv_data_update', {
                detail: { key: key, value: value, timestamp: Date.now() }
            }));
        } catch (e) {
            console.error('ìë°ì´í¸ ìë¦¼ ì¤ë¥:', e);
        }
    },

    // ì¤ìê° ëê¸°í ì¤ì 
    setupSync: function(callback) {
        // localStorage ë³ê²½ ê°ì§
        window.addEventListener('storage', function(e) {
            if (e.key && e.key.startsWith('dgmtv_')) {
                if (callback) callback(e.key, e.newValue);
            }
        });

        // ê°ì ì°½ììì ë³ê²½ì¬í­ ê°ì§
        window.addEventListener('dgmtv_data_update', function(e) {
            if (callback) callback(e.detail.key, e.detail.value);
        });
    },

    // ì´ê¸° ë°ì´í° ì¤ì 
    initializeData: function() {
        // ê¸°ë³¸ ë´ì¤ ë°ì´í°
        if (!this.getData(this.KEYS.NEWS)) {
            this.setData(this.KEYS.NEWS, []);
        }

        // ê¸°ë³¸ ìë£ ë°ì´í°
        if (!this.getData(this.KEYS.RESOURCES)) {
            this.setData(this.KEYS.RESOURCES, []);
        }

        // ê¸°ë³¸ í¸í° íì¤í¸
        if (!this.getData(this.KEYS.FOOTER_TEXT)) {
            this.setData(this.KEYS.FOOTER_TEXT, "íëëì ì¬ëì ì¤ì²íë©° ì§ì­ì¬íì í¨ê» ì±ì¥íë êµí");
        }

        // ê¸°ë³¸ ë°©ë¬¸ì íµê³
        if (!this.getData(this.KEYS.VISITOR_STATS)) {
            this.setData(this.KEYS.VISITOR_STATS, {
                daily: 0,
                total: 0,
                lastVisitDate: new Date().toISOString().split('T')[0]
            });
        }

        // ê¸°ë³¸ ì¤ì 
        if (!this.getData(this.KEYS.SETTINGS)) {
            this.setData(this.KEYS.SETTINGS, {
                siteName: "ì¤ì°ëê´êµí",
                description: "íëëì ì¬ëì ì¤ì²íë©° ì§ì­ì¬íì í¨ê» ì±ì¥íë êµí",
                phone: "031-377-0675",
                email: "derek1817@naver.com",
                address: "ê²½ê¸°ë ì¤ì°ì ê¶ë¦¬ì¬ë¡46ë²ê¸¸ 60-5"
            });
        }
    }
};

// ì´ê¸°í
window.DGMTV_SHARED.initializeData();

</script>
    <script>

// CMS ë°ì´í° ëê¸°í ìì¤í
window.DGMTV_CMS = {
    // ê¸°ì¡´ dataStoreë¥¼ ê³µíµ ì ì¥ìì ì°ë
    syncDataStore: function() {
        if (typeof dataStore !== 'undefined') {
            // ê¸°ì¡´ dataStoreì ë°ì´í°ë¥¼ ê³µíµ ì ì¥ìì ì ì¥
            if (dataStore.news) {
                window.DGMTV_SHARED.setData(window.DGMTV_SHARED.KEYS.NEWS, dataStore.news);
            }
            if (dataStore.resources) {
                window.DGMTV_SHARED.setData(window.DGMTV_SHARED.KEYS.RESOURCES, dataStore.resources);
            }
            if (dataStore.settings && dataStore.settings.footerText) {
                window.DGMTV_SHARED.setData(window.DGMTV_SHARED.KEYS.FOOTER_TEXT, dataStore.settings.footerText);
            }
        }
    },

    // ê³µíµ ì ì¥ììì dataStoreë¡ ë°ì´í° ë¡ë
    loadFromSharedStorage: function() {
        if (typeof dataStore !== 'undefined') {
            const news = window.DGMTV_SHARED.getData(window.DGMTV_SHARED.KEYS.NEWS, []);
            const resources = window.DGMTV_SHARED.getData(window.DGMTV_SHARED.KEYS.RESOURCES, []);
            const footerText = window.DGMTV_SHARED.getData(window.DGMTV_SHARED.KEYS.FOOTER_TEXT);

            if (news) dataStore.news = news;
            if (resources) dataStore.resources = resources;
            if (footerText && dataStore.settings) {
                dataStore.settings.footerText = footerText;
            }
        }
    },

    // ê¸°ì¡´ ì ì¥ í¨ì íì¥
    extendSaveData: function() {
        if (typeof saveData === 'function') {
            const originalSaveData = saveData;
            window.saveData = function() {
                // ê¸°ì¡´ ì ì¥ ì¤í
                const result = originalSaveData.apply(this, arguments);

                // ê³µíµ ì ì¥ììë ì ì¥
                window.DGMTV_CMS.syncDataStore();

                return result;
            };
        }
    },

    // ë´ì¤ ì ì¥ í¨ì íì¥
    extendNewsSave: function() {
        if (typeof handleNewsSave === 'function') {
            const originalHandleNewsSave = handleNewsSave;
            window.handleNewsSave = function() {
                // ê¸°ì¡´ ì ì¥ ì¤í
                const result = originalHandleNewsSave.apply(this, arguments);

                // ê³µíµ ì ì¥ìì ë´ì¤ ë°ì´í° ì ì¥
                if (typeof dataStore !== 'undefined' && dataStore.news) {
                    window.DGMTV_SHARED.setData(window.DGMTV_SHARED.KEYS.NEWS, dataStore.news);
                }

                return result;
            };
        }
    },

    // í¸í° ì ì¥ í¨ì íì¥
    extendFooterSave: function() {
        if (typeof saveFooterText === 'function') {
            const originalSaveFooterText = saveFooterText;
            window.saveFooterText = function() {
                // ê¸°ì¡´ ì ì¥ ì¤í
                const result = originalSaveFooterText.apply(this, arguments);

                // ê³µíµ ì ì¥ìì í¸í° íì¤í¸ ì ì¥
                if (typeof dataStore !== 'undefined' && dataStore.settings && dataStore.settings.footerText) {
                    window.DGMTV_SHARED.setData(window.DGMTV_SHARED.KEYS.FOOTER_TEXT, dataStore.settings.footerText);
                }

                return result;
            };
        }
    },

    // ë°©ë¬¸ì íµê³ ì°ë
    syncVisitorStats: function() {
        const sharedStats = window.DGMTV_SHARED.getData(window.DGMTV_SHARED.KEYS.VISITOR_STATS, {
            daily: 0,
            total: 0,
            lastVisitDate: new Date().toISOString().split('T')[0]
        });

        // CMS ëìë³´ëì ë°©ë¬¸ì íµê³ íì
        const dailyElement = document.getElementById('dailyVisitors');
        const totalElement = document.getElementById('totalVisitors');

        if (dailyElement) dailyElement.textContent = sharedStats.daily;
        if (totalElement) totalElement.textContent = sharedStats.total;
    },

    // ì¤ìê° ëê¸°í ì¤ì 
    setupRealtimeSync: function() {
        // ë¤ë¥¸ ì°½ììì ë³ê²½ì¬í­ ê°ì§
        window.DGMTV_SHARED.setupSync((key, value) => {
            if (key === window.DGMTV_SHARED.KEYS.VISITOR_STATS) {
                this.syncVisitorStats();
            }

            // ê¸°ì¡´ UI ìë°ì´í¸ í¨ìë¤ í¸ì¶
            if (typeof updateNewsList === 'function') {
                updateNewsList();
            }
            if (typeof updateResourcesList === 'function') {
                updateResourcesList();
            }
        });

        // ì£¼ê¸°ì  ëê¸°í (10ì´ë§ë¤)
        setInterval(() => {
            this.syncVisitorStats();
        }, 10000);
    },

    // ì´ê¸°í
    init: function() {
        // ê¸°ì¡´ í¨ìë¤ íì¥
        this.extendSaveData();
        this.extendNewsSave();
        this.extendFooterSave();

        // ê³µíµ ì ì¥ììì ë°ì´í° ë¡ë
        this.loadFromSharedStorage();

        // ì¤ìê° ëê¸°í ì¤ì 
        this.setupRealtimeSync();

        // ë°©ë¬¸ì íµê³ ëê¸°í
        this.syncVisitorStats();

        console.log('DGMTV CMS ëê¸°í ìì¤í ì´ê¸°í ìë£');
    }
};

// CMS ë¡ë ìë£ í ì´ê¸°í (ì½ê°ì ì§ì°ì ëì´ ê¸°ì¡´ ì¤í¬ë¦½í¸ ë¡ë ëê¸°)
document.addEventListener('DOMContentLoaded', function() {
    console.log('DOM 로드 완료 - 초기화 시작');

    // 확실한 초기화 순서
    try {
        // 1. 이벤트 리스너 설정 (가장 중요)
        if (typeof setupEventListeners === 'function') {
            setupEventListeners();
        }

        // 2. 기본 데이터 로드
        if (typeof loadData === 'function') {
            loadData();
        }

        // 3. UI 업데이트
        if (typeof updateNewsList === 'function') {
            updateNewsList();
        }
        if (typeof updateResourcesList === 'function') {
            updateResourcesList();
        }
        if (typeof updatePopupsList === 'function') {
            updatePopupsList();
        }
        if (typeof loadFooterText === 'function') {
            loadFooterText();
        }
        if (typeof setupFooterPreview === 'function') {
            setupFooterPreview();
        }

        console.log('기본 초기화 완료');

        // 4. 동기화 시스템 초기화 (약간의 지연)
        setTimeout(function() {
            if (window.DGMTV_CMS && typeof window.DGMTV_CMS.init === 'function') {
                window.DGMTV_CMS.init();
                console.log('동기화 시스템 초기화 완료');
            }
        }, 1000);

        // 5. 로그인 모달 확실히 표시
        setTimeout(function() {
            const loginModal = document.getElementById('loginModal');
            if (loginModal) {
                loginModal.style.display = 'flex';
                loginModal.classList.add('show');
                console.log('로그인 모달 표시 완료');

                // 사용자명 입력 필드에 포커스
                const usernameInput = document.getElementById('username');
                if (usernameInput) {
                    usernameInput.focus();
                }
            }
        }, 500);

    } catch (error) {
        console.error('초기화 중 오류:', error);
    }
});

</script>
</head>
<body>
    <!-- ìì±ë ì»¨íì¸ ë¤ -->
    ${generateBannerHTML()}
    ${generateNewsHTML()}
    ${generateResourcesHTML()}
    ${generateContactHTML()}
</body>
</html>`;
        }

        // ë°ì´í° ì ì¥/ë¡ë
        function saveData() {
            try {
                localStorage.setItem('churchCMSData', JSON.stringify(dataStore));
                console.log('ë°ì´í° ì ì¥ ìë£');
            } catch (error) {
                console.error('ë°ì´í° ì ì¥ ì¤í¨:', error);
                showToast('ë°ì´í° ì ì¥ì ì¤í¨íìµëë¤.', 'error');
            }
        }

        function loadData() {
            try {
                const savedData = localStorage.getItem('churchCMSData');
                if (savedData) {
                    const parsedData = JSON.parse(savedData);
                    Object.assign(dataStore, parsedData);
                    console.log('ì ì¥ë ë°ì´í° ë¡ë ìë£');
                    
                    // UI ìë°ì´í¸
                    document.getElementById('mainTitle').value = dataStore.settings.mainTitle;
                    document.getElementById('subTitle').value = dataStore.settings.subTitle;
                    document.getElementById('phoneNumber').value = dataStore.settings.phone;
                    document.getElementById('emailAddress').value = dataStore.settings.email;
                    document.getElementById('address').value = dataStore.settings.address;
                }
            } catch (error) {
                console.error('ë°ì´í° ë¡ë ì¤í¨:', error);
            }
        }

        // ë°±ì ê´ë ¨ í¨ìë¤
        function createBackup() {
            const backupData = {
                timestamp: new Date().toISOString(),
                data: dataStore
            };
            
            const blob = new Blob([JSON.stringify(backupData, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `church_cms_backup_${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
            
            showToast('ë°±ì íì¼ì´ ë¤ì´ë¡ëëììµëë¤.', 'success');
        }

        function restoreBackup() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        try {
                            const backupData = JSON.parse(e.target.result);
                            Object.assign(dataStore, backupData.data);
                            saveData();
                            updateDashboard();
                            showToast('ë°±ìì´ ë³µìëììµëë¤.', 'success');
                        } catch (error) {
                            showToast('ë°±ì íì¼ì´ ì¬ë°ë¥´ì§ ììµëë¤.', 'error');
                        }
                    };
                    reader.readAsText(file);
                }
            };
            input.click();
        }

        // GitHub í í° ë¡ë
        document.addEventListener('DOMContentLoaded', function() {
    console.log('DOM 로드 완료 - 초기화 시작');

    // 확실한 초기화 순서
    try {
        // 1. 이벤트 리스너 설정 (가장 중요)
        if (typeof setupEventListeners === 'function') {
            setupEventListeners();
        }

        // 2. 기본 데이터 로드
        if (typeof loadData === 'function') {
            loadData();
        }

        // 3. UI 업데이트
        if (typeof updateNewsList === 'function') {
            updateNewsList();
        }
        if (typeof updateResourcesList === 'function') {
            updateResourcesList();
        }
        if (typeof updatePopupsList === 'function') {
            updatePopupsList();
        }
        if (typeof loadFooterText === 'function') {
            loadFooterText();
        }
        if (typeof setupFooterPreview === 'function') {
            setupFooterPreview();
        }

        console.log('기본 초기화 완료');

        // 4. 동기화 시스템 초기화 (약간의 지연)
        setTimeout(function() {
            if (window.DGMTV_CMS && typeof window.DGMTV_CMS.init === 'function') {
                window.DGMTV_CMS.init();
                console.log('동기화 시스템 초기화 완료');
            }
        }, 1000);

        // 5. 로그인 모달 확실히 표시
        setTimeout(function() {
            const loginModal = document.getElementById('loginModal');
            if (loginModal) {
                loginModal.style.display = 'flex';
                loginModal.classList.add('show');
                console.log('로그인 모달 표시 완료');

                // 사용자명 입력 필드에 포커스
                const usernameInput = document.getElementById('username');
                if (usernameInput) {
                    usernameInput.focus();
                }
            }
        }, 500);

    } catch (error) {
        console.error('초기화 중 오류:', error);
    }
});
    </script>
</body>
</html>
    <script id="html_badge_script1">
        window.__genspark_remove_badge_link = "https://www.genspark.ai/api/html_badge/" +
            "remove_badge?token=To%2FBnjzloZ3UfQdcSaYfDuhcB2MtAb%2BSxZ3WcUsb6ap4LrIwO4%2BBOIANzFQAxfQi62KDSXlc%2FknqgT7B8AtfK2MOJzm22jRtDQF3IpAdgxsByHfhJi%2B3dJupbh1ZSXZBKSNxWG7eQG9yEXbBu2NTpE8AuEf4OfJ8Mu%2Fi6Cwhc8Zpon92jh3%2FqMeSBm8xMCQarewYnlNd4%2BnygOwdmSJzps61ADAwiKyIVmnau4W3o72XaFCkoIGsO8hJKo4Xnpfp%2B4e0Dfumuoem%2FymqVbZ48pvggBkm2hIK9ujzrfMkRYXOcrIBbUxTDduO1fA4gmN15ITpwIaOHd%2FK1KuPfxDwGZmzH1KumE81vsNrMCq8mEIPuQURWNgpkcSOe8SyTktMcteU1Rw9H1UKgAsk0tGLPc0AiS83oGUEzmEK%2FBMxZeUWbPkfsTqtvrOVQ%2FxL7U7iMmLtooIY%2FQhu%2FB5pZ%2BMc1xRkYN1EkASaZadzjjq4WORNid623xa7QKw3JPN4CMKYW1x18wnzNbQ%2BnUKqlrqfiQ%3D%3D";
        window.__genspark_locale = "ko-KR";
        window.__genspark_token = "To/BnjzloZ3UfQdcSaYfDuhcB2MtAb+SxZ3WcUsb6ap4LrIwO4+BOIANzFQAxfQi62KDSXlc/knqgT7B8AtfK2MOJzm22jRtDQF3IpAdgxsByHfhJi+3dJupbh1ZSXZBKSNxWG7eQG9yEXbBu2NTpE8AuEf4OfJ8Mu/i6Cwhc8Zpon92jh3/qMeSBm8xMCQarewYnlNd4+nygOwdmSJzps61ADAwiKyIVmnau4W3o72XaFCkoIGsO8hJKo4Xnpfp+4e0Dfumuoem/ymqVbZ48pvggBkm2hIK9ujzrfMkRYXOcrIBbUxTDduO1fA4gmN15ITpwIaOHd/K1KuPfxDwGZmzH1KumE81vsNrMCq8mEIPuQURWNgpkcSOe8SyTktMcteU1Rw9H1UKgAsk0tGLPc0AiS83oGUEzmEK/BMxZeUWbPkfsTqtvrOVQ/xL7U7iMmLtooIY/Qhu/B5pZ+Mc1xRkYN1EkASaZadzjjq4WORNid623xa7QKw3JPN4CMKYW1x18wnzNbQ+nUKqlrqfiQ==";
    </script>
    
    <script id="html_notice_dialog_script" src="https://www.genspark.ai/notice_dialog.js"></script>
    